<!DOCTYPE HTML>
<html lang="en" >
    <head><meta charset="UTF-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>3. Volumes · Intelligent Mind Labs</title><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="Wikis for Data Science, Computing, Software Development, Math, etc.
"><!-- <meta name="generator" content="Jekyll (using style of GitBook 3.2.3)"> --><meta name="author" content="Intelligent Mind Labs"><!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script> -->

<!-- For logo animation -->
<!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"> -->

<link rel="stylesheet" href="/dev/os/assets/fonts/fa5.15/css/all.min.css">

<link id="gitbook_style" rel="stylesheet" href="/dev/os/assets/gitbook/style.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-expandable-chapters-small2/expandable-chapters-small.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-fontsettings/website.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-search-pro/search.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-splitter/splitter.css">



<!-- <link rel="stylesheet" href="/dev/os/assets/gitbook/rouge/colorful.css"> -->

<style>
@import url('https://fonts.googleapis.com/css2?family=Exo:ital,wght@0,100..900;1,100..900&display=swap');
</style>
    

<link rel="stylesheet" href="/dev/os/assets/gitbook/custom.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/custom-local.css"><style>
.img_url {
    content: url("/dev/os/assets/images/wiki.imindlabs.grey.logo.png");
}

.book.color-theme-2 .img_url {
    content: url("/dev/os/assets/images/wiki.imindlabs.logo.png");
}
</style><link rel="stylesheet" href="/dev/os/assets/gitbook/custom-local-child.css">

<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<!-- <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/dev/os/assets/gitbook/images/apple-touch-icon-precomposed-152.png"> -->
<!-- <link rel="shortcut icon" href="/dev/os/wiki.imindlabs.favicon.png" type="image/x-icon"> -->
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/dev/os/wiki.imindlabs.favicon.png">
<link rel="icon" href="/dev/os/wiki.imindlabs.favicon.png" sizes="32x32" type="image/png">
<link rel="icon" href="/dev/os/wiki.imindlabs.favicon.png" sizes="16x16" type="image/png">
<link rel="shortcut icon" href="/dev/os/wiki.imindlabs.favicon.png" type="image/png">



<!-- trackers -->
            <link rel="prev" href="/dev/os/docker/3_docker_2_workflow/" />
        

        
            <link rel="next" href="/dev/os/docker/3_docker_4_networking/" />
        
    </head>
    <body>         
        <div class="book"><div class="book-summary">
    <script type="text/javascript">
        // Fixes the page links scroll problem on both desktop and mobile browsers
        function pageScrollToTop(element) {
            // both mobile and non-mobile
            $('div.body-inner').animate({ scrollTop: 0 });
            $(element).parent().find('li>ul>li').removeClass('active');
            return true;  // propagate
        }
        // Fixes the anchor links scroll problem on mobile browsers
        function mobilePageScrollToAnchor(element) {
            $(element).closest('li.chapter').find('ul>li').removeClass('active');
            $(element).parent().addClass('active');
            
            // ! BUG: Enable the following functionality on large screen sizes
            // On sub menu item click the page did not navigate. Now it does.
            //if ($(document).width() <= 1240) {
                $('div.body-inner').animate({ scrollTop: $($(element).attr('href')).get(0).offsetTop });
            // }
            return true;
        }
    </script>

    <!-- <div style="text-align:center;" class="animate__animated animate__pulse animate__delay-1s">
        <a href="/dev/os/">
            <img class="logo zoom" src="/dev/os/assets/images/wiki.imindlabs.logo.png" alt="Intelligent Mind Labs wiki logo" />
        </a>
    </div> -->
    <div style="text-align:center;" class="logo-wrap">
        <a href="/dev/os/">
            <img class="logo zoom" src="/dev/os/assets/images/wiki.imindlabs.logo_153x200.webp" alt="Intelligent Mind Labs wiki logo" width="153" height="200"/>
        </a>
    </div>

    <nav role="navigation">
        <div id="book-search-input" role="search">
            <input type="text" placeholder="Type to search" />
        </div>
        <div id="book-search-input-link" role="search">
            <a href="/dev/os/assets/search.html">Click to Search</a>
        </div>
        <ul class="summary">
            
            <li class="chapter" data-level="1.1" data-path="/dev/os">
                
                <a href="/dev/os/" onclick="pageScrollToTop(this)">
                    Wiki | O/S
                </a>
            </li>

            <!-- <li class="divider"></li> -->

            
            <!-- <p>1_windows</p> -->
            
                <p class="collection-title">Windows</p>
            
            
            

            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/1_windows10/">
                
                <a href="/dev/os/windows/1_windows10/" onclick="pageScrollToTop(this)">
                    1. Windows 10
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/2_windows_server2019/">
                
                <a href="/dev/os/windows/2_windows_server2019/" onclick="pageScrollToTop(this)">
                    2. Windows Server 2019
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/3.1_mingw/">
                
                <a href="/dev/os/windows/3.1_mingw/" onclick="pageScrollToTop(this)">
                    3.1. MinGW
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/3.2_cygwin/">
                
                <a href="/dev/os/windows/3.2_cygwin/" onclick="pageScrollToTop(this)">
                    3.2. Cygwin
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/3_wsl/">
                
                <a href="/dev/os/windows/3_wsl/" onclick="pageScrollToTop(this)">
                    3. Linux for Windows (WSL)
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>2_unix</p> -->
            
                <p class="collection-title">Unix Distribution</p>
            
            
            

            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/linux/1_ubuntu/">
                
                <a href="/dev/os/linux/1_ubuntu/" onclick="pageScrollToTop(this)">
                    1. Ubuntu
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/linux/2_kali_linux/">
                
                <a href="/dev/os/linux/2_kali_linux/" onclick="pageScrollToTop(this)">
                    2. Kali Linux
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>3_vmachines</p> -->
            
                <p class="collection-title">Virtual Machines</p>
            
            
            

            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/vmmachine/1_vmworkstation/">
                
                <a href="/dev/os/vmmachine/1_vmworkstation/" onclick="pageScrollToTop(this)">
                    1. VM Workstation
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/vmmachine/2_windows_hyper_v/">
                
                <a href="/dev/os/vmmachine/2_windows_hyper_v/" onclick="pageScrollToTop(this)">
                    2. Windows Hyper-V
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>4_containerization</p> -->
            
                <p class="collection-title">Containerization</p>
            
            
            

            
            
            
            <p class="separator-title">Docker</p>
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_0_images/">
                
                <a href="/dev/os/docker/3_docker_0_images/" onclick="pageScrollToTop(this)">
                    0. Images to Download
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_1_fundamentals/">
                
                <a href="/dev/os/docker/3_docker_1_fundamentals/" onclick="pageScrollToTop(this)">
                    1. Fundamentals
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_2_workflow/">
                
                <a href="/dev/os/docker/3_docker_2_workflow/" onclick="pageScrollToTop(this)">
                    2. Workflow
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter active" data-level="1.2" data-path="/dev/os/docker/3_docker_3_volume/">
                
                <a href="/dev/os/docker/3_docker_3_volume/" onclick="pageScrollToTop(this)">
                    3. Volumes
                </a>
                
                
                <ul><li><a href="#1-creation-of-volume" onclick="mobilePageScrollToAnchor(this)" >1. Creation of Volume</a><ul><li><a href="#11-mount-a-folder" onclick="mobilePageScrollToAnchor(this)" >1.1 Mount a folder</a></li><li><a href="#12-named-volume" onclick="mobilePageScrollToAnchor(this)" >1.2 Named Volume</a></li><li><a href="#13-create-a-named-volume-on-the-fly" onclick="mobilePageScrollToAnchor(this)" >1.3 Create a named volume on the fly</a></li><li><a href="#14-additional-tips" onclick="mobilePageScrollToAnchor(this)" >1.4 Additional Tips</a></li></ul></li><li><a href="#2-shared-volume" onclick="mobilePageScrollToAnchor(this)" >2. Shared Volume</a><ul><li><a href="#21-method-01" onclick="mobilePageScrollToAnchor(this)" >2.1 Method 01</a></li><li><a href="#22-method-02" onclick="mobilePageScrollToAnchor(this)" >2.2 Method 02</a></li><li><a href="#23-detach--remove-a-volume" onclick="mobilePageScrollToAnchor(this)" >2.3 Detach / Remove a Volume</a><ul><li><a href="#note" onclick="mobilePageScrollToAnchor(this)" >Note:</a></li></ul></li><li><a href="#24-attach-a-volume" onclick="mobilePageScrollToAnchor(this)" >2.4 Attach a Volume</a></li></ul></li><li><a href="#3-additional-tips" onclick="mobilePageScrollToAnchor(this)" >3. Additional Tips:</a></li></ul>

                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_4_networking/">
                
                <a href="/dev/os/docker/3_docker_4_networking/" onclick="pageScrollToTop(this)">
                    4. Networking
                </a>
                
                
                
            </li>
            
            
            
            <p class="separator-title">Kubernetes</p>
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_1_fundamentals/">
                
                <a href="/dev/os/docker/3_kube_1_fundamentals/" onclick="pageScrollToTop(this)">
                    1. Fundamentals
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_2_kubectl/">
                
                <a href="/dev/os/docker/3_kube_2_kubectl/" onclick="pageScrollToTop(this)">
                    2. kubectl
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_3_deployments/">
                
                <a href="/dev/os/docker/3_kube_3_deployments/" onclick="pageScrollToTop(this)">
                    2. kubectl
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>5_iotplatforms</p> -->
            
                <p class="collection-title">IoT Platform</p>
            
            
            

            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/iotplatform/1_tensorboard/">
                
                <a href="/dev/os/iotplatform/1_tensorboard/" onclick="pageScrollToTop(this)">
                    1. Home Assistant
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>posts</p> -->
            
            
            

            

            
            
            
        </ul>
    </nav>
</div><div class="book-body">
                <div class="book-header" role="navigation">
                    <!-- Title -->
                    <h1>
                        <i class="fa fa-circle-o-notch fa-spin"></i>
                        
                            <a href="." >3. Volumes</a>
                        
                    </h1>
                </div>

                <div class="body-inner"><div class="page-wrapper" tabindex="-1" role="main">
    

    <!-- <div class="spinner-container">
        <div class="spinner-border text-info" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div> -->

    <div class="page-inner">
        <div id="book-search-results"> <!-- class="hide_element" -->            
            <div class="search-noresults">
                <section class="normal markdown-section">
                    
                        <h1 id="/docker/3_docker_3_volume">3. Volumes</h1>
                    

                    <h1 id="1-creation-of-volume">1. Creation of Volume</h1>

<p>Following methods are available to persist data in docker</p>

<h2 id="11-mount-a-folder">1.1 Mount a folder</h2>

<p>If you need to persist data, you can mount a volume using the <code class="language-plaintext highlighter-rouge">-v</code> flag:
You can mount a folder in a host PC to the container as a volume</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> <span class="nt">-v</span> /host/path:/container/path alpine-bash
</code></pre></div></div>

<h2 id="12-named-volume">1.2 Named Volume</h2>

<p>First create the volume and then mount it.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker volume create named-volume
docker run <span class="nt">-dit</span> <span class="nt">--name</span> ubuntu-named-vol <span class="nt">--volume</span> named-volume:/volume-mounted-from-host ubuntu:latest

<span class="c"># or </span>

docker run <span class="nt">-dit</span> <span class="nt">--name</span> ubuntu-named-vol <span class="nt">-v</span> named-volume:/volume-mounted-from-host ubuntu:latest
</code></pre></div></div>

<blockquote class="block-tip">
  <h5 id="important">IMPORTANT</h5>

  <p>The named volume created will stay in docker (not on the host PC). You can import content to the name volume created via docker and access it inside the container (vice versa).</p>
</blockquote>

<h2 id="13-create-a-named-volume-on-the-fly">1.3 Create a named volume on the fly</h2>

<p>Docker creates the <strong>named volume</strong> on the fly and mount it. How</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>docker run <span class="nt">-dit</span> <span class="nt">--name</span> ubuntu-named-vol –mount <span class="nb">source</span><span class="o">=</span>myvolume <span class="nv">target</span><span class="o">=</span>/volume-mounted-from-host ubuntu:latest

<span class="c"># or </span>

docker run <span class="nt">-dit</span> <span class="nt">--name</span> ubuntu-named-vol <span class="nt">-v</span> named-volume:/volume-mounted-from-host ubuntu:latest
</code></pre></div></div>

<h2 id="14-additional-tips">1.4 Additional Tips</h2>

<h4 id="mount-a-volume-onto-an-existing-directory">Mount a volume onto an existing directory</h4>

<p>You can also mount a volume for an existing data volumn / folder inside the container. Following will create a container and add the data volume at <code class="language-plaintext highlighter-rouge">/var</code>, a directory that is found in the base image.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-dit</span> <span class="nt">--name</span> ubuntu-named-vol <span class="nt">-v</span> named-volume:/var ubuntu:latest
</code></pre></div></div>

<h1 id="2-shared-volume">2. Shared Volume</h1>

<p>To share a volume between two Docker containers, you can create a Docker volume and then mount it to both containers. This allows the containers to read from and write to the same storage location, enabling them to share data.</p>

<h2 id="21-method-01">2.1 Method 01</h2>

<h4 id="1-create-a-docker-volume">1. <strong>Create a Docker Volume:</strong></h4>
<p>First, create a Docker volume that will be shared between the containers.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker volume create shared_volume
</code></pre></div></div>

<p>This creates a named volume called <code class="language-plaintext highlighter-rouge">shared_volume</code>.</p>

<h4 id="2-run-the-first-container-with-the-volume">2. <strong>Run the First Container with the Volume:</strong></h4>
<p>Run the first container and mount the volume to a specific directory inside the container.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker run <span class="nt">-d</span> <span class="nt">--name</span> container1 <span class="nt">-v</span> shared_volume:/shared_data my_image
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">-d</code>: Runs the container in detached mode.</li>
  <li><code class="language-plaintext highlighter-rouge">--name container1</code>: Names the container <code class="language-plaintext highlighter-rouge">container1</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">-v shared_volume:/shared_data</code>: Mounts the <code class="language-plaintext highlighter-rouge">shared_volume</code> to the <code class="language-plaintext highlighter-rouge">/shared_data</code> directory inside the container.</li>
  <li><code class="language-plaintext highlighter-rouge">my_image</code>: The name of the Docker image to run.</li>
</ul>

<h4 id="3-run-the-second-container-with-the-same-volume">3. <strong>Run the Second Container with the Same Volume:</strong></h4>
<p>Now, run the second container and mount the same volume to a directory inside it.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker run <span class="nt">-d</span> <span class="nt">--name</span> container2 <span class="nt">-v</span> shared_volume:/shared_data my_image
</code></pre></div></div>

<p>This mounts the same <code class="language-plaintext highlighter-rouge">shared_volume</code> to the <code class="language-plaintext highlighter-rouge">/shared_data</code> directory inside the second container.</p>

<h5 id="explanation">Explanation:</h5>
<ul>
  <li>Both containers (<code class="language-plaintext highlighter-rouge">container1</code> and <code class="language-plaintext highlighter-rouge">container2</code>) now share the same <code class="language-plaintext highlighter-rouge">shared_volume</code> mounted to the <code class="language-plaintext highlighter-rouge">/shared_data</code> directory.</li>
  <li>Any data written to <code class="language-plaintext highlighter-rouge">/shared_data</code> by one container will be accessible to the other container, allowing them to share files and data.</li>
</ul>

<h5 id="example-scenario">Example Scenario:</h5>
<p>If <code class="language-plaintext highlighter-rouge">container1</code> writes a file to <code class="language-plaintext highlighter-rouge">/shared_data/myfile.txt</code>, <code class="language-plaintext highlighter-rouge">container2</code> will be able to read that file from the same location.</p>

<p>This is useful in various scenarios, such as when you want two services running in separate containers to share configuration files, logs, or any other data.</p>

<h2 id="22-method-02">2.2 Method 02</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a volume on the fly</span>
docker run <span class="nt">-it</span> <span class="nt">--name</span><span class="o">=</span>Container1 <span class="nt">-v</span> named-volume:/shared-data-vol ubuntu

<span class="c"># Now, create another container that mounts the same volume from Container1 (using --volumes-from)</span>
docker run <span class="nt">-it</span> <span class="nt">--name</span><span class="o">=</span>Container2 <span class="nt">--volumes-from</span> Container1 ubuntu
<span class="c"># This will show the volume `named-volume` (from Container1) inside Container2</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">--volumes-from &lt;source_container&gt;</code>: Specifies the container from which volumes should be mounted. This is the container that has the volumes you want to share.</p>

<h2 id="23-detach--remove-a-volume">2.3 Detach / Remove a Volume</h2>

<p>To detach a volume from a Docker container, you generally need to stop the container first and then <strong>remove the container</strong>. If you just want to detach the volume without removing it, you can do this by <strong>removing the container without deleting the associated volume</strong>. Steps are described below:</p>

<h4 id="1-stop-the-container-optional">1. <strong>Stop the Container (Optional):</strong></h4>
<p>If the container is running, stop it first:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker stop &lt;container_name_or_id&gt;
</code></pre></div></div>

<h4 id="2-remove-the-container-without-removing-the-volume">2. <strong>Remove the Container Without Removing the Volume:</strong></h4>
<p>When removing the container, you can use the <code class="language-plaintext highlighter-rouge">--volumes</code> or <code class="language-plaintext highlighter-rouge">-v</code> flag to delete the associated volumes. To detach the volume and keep it intact, you should omit this flag:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker <span class="nb">rm</span> &lt;container_name_or_id&gt;
</code></pre></div></div>

<p>This command will remove the container but will leave the volume intact.</p>

<h4 id="3-re-attach-the-volume-to-a-new-container-optional">3. <strong>Re-Attach the Volume to a New Container (Optional):</strong></h4>
<p>If you want to use the same volume with another container, you can re-attach it when running a new container:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker run <span class="nt">-d</span> <span class="nt">--name</span> new_container <span class="nt">-v</span> shared_volume:/shared_data my_image
</code></pre></div></div>

<h4 id="example">Example:</h4>
<p>Let’s say you have a container named <code class="language-plaintext highlighter-rouge">container1</code> using a volume called <code class="language-plaintext highlighter-rouge">shared_volume</code>:</p>

<ol>
  <li><strong>Stop the Container:</strong>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stop container1
</code></pre></div>    </div>
  </li>
  <li><strong>Remove the Container (Without Removing the Volume):</strong>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">rm </span>container1
</code></pre></div>    </div>
  </li>
  <li><strong>Re-Attach the Volume to Another Container:</strong>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-d</span> <span class="nt">--name</span> container2 <span class="nt">-v</span> shared_volume:/shared_data my_image
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="note">Note:</h3>
<ul>
  <li>
    <p>If you use the <code class="language-plaintext highlighter-rouge">docker rm -v &lt;container_name_or_id&gt;</code> command, it will remove the container and any anonymous volumes associated with it, but named volumes like <code class="language-plaintext highlighter-rouge">shared_volume</code> will not be deleted unless explicitly removed with <code class="language-plaintext highlighter-rouge">docker volume rm</code>.</p>
  </li>
  <li>
    <p>The volume itself persists until you explicitly delete it with:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker volume <span class="nb">rm </span>shared_volume
</code></pre></div>    </div>
  </li>
</ul>

<p>This approach allows you to detach a volume from one container and re-attach it to another, keeping the data intact and available.</p>

<h2 id="24-attach-a-volume">2.4 Attach a Volume</h2>

<blockquote class="block-tip">
  <h5 id="important-1">IMPORTANT</h5>

  <p>Attaching a volume to an existing Docker container directly is not possible. Docker containers have a fixed configuration once they are created, which includes their volumes.</p>
</blockquote>

<p>However, you can achieve the desired result by creating a new container with the same configuration as the old one, including the new volume.</p>

<h4 id="1-create-a-new-container-with-the-additional-volume">1. <strong>Create a New Container with the Additional Volume</strong></h4>

<p>To simulate adding a volume to an existing container, you can create a new container based on the old one’s configuration and include the new volume mount.</p>

<p><strong>1. Retrieve the Configuration of the Existing Container:</strong></p>

<p>First, get the details of the existing containe**r. You’ll need the image name and any necessary configuration details like environment variables, port mappings, etc. Use the following command to get the configuration:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker inspect &lt;existing_container_name_or_id&gt;
</code></pre></div></div>

<p>Look for relevant details such as environment variables, ports, and volume mounts in the output.</p>

<p><strong>2. Run a New Container with the Same Configuration and the New Volume:</strong></p>

<p>Use the information obtained from the inspect c**ommd to create a new container with the additional volume.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker run <span class="nt">-d</span> <span class="se">\</span>
     <span class="nt">--name</span> &lt;new_container_name&gt; <span class="se">\</span>
     <span class="nt">--env</span> &lt;env_vars&gt; <span class="se">\</span>
     <span class="nt">-p</span> &lt;host_port&gt;:&lt;container_port&gt; <span class="se">\</span>
     <span class="nt">-v</span> &lt;new_host_volume_path&gt;:&lt;new_container_volume_path&gt; <span class="se">\</span>
     &lt;image_name&gt;
</code></pre></div></div>

<p>Replace:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;new_container_name&gt;</code>: a name for the new container.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;env_vars&gt;</code>: environment variables if needed (format: <code class="language-plaintext highlighter-rouge">VAR=value</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;host_port&gt;:&lt;container_port&gt;</code>: port mappings if needed.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;new_host_volume_path&gt;</code>: the new volume path on the host machine.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;new_container_volume_path&gt;</code>: the path inside the container where the new volume will be mounted.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;image_name&gt;</code>: the Docker image used by the existing container.</li>
</ul>

<p>Make sure to include any other configurations that were present in the old container.</p>

<p><strong>3. Copy Data (if necessary):</strong></p>

<p>If you need to transfer data from the old container to the new one, you might need to manually cop**y fes. You can use <code class="language-plaintext highlighter-rouge">docker cp</code> to copy files between containers or between the host and containers.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker <span class="nb">cp</span> &lt;existing_container_name_or_id&gt;:&lt;path_in_container&gt; &lt;path_on_host&gt;
   docker <span class="nb">cp</span> &lt;path_on_host&gt; &lt;new_container_name&gt;:&lt;path_in_container&gt;
</code></pre></div></div>

<p><strong>4. Verify the New Container:</strong></p>

<p>Check if the new container is running correctly and verify the volume mount:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker inspect &lt;new_container_name&gt; | <span class="nb">grep </span>Mounts <span class="nt">-A</span> 10
</code></pre></div></div>

<p><strong>5. Remove the Old Container (optional):</strong></p>

<p>Once you’ve confirmed that the new container is working as expected, you can remove the old container if it’s no longer needed:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker <span class="nb">rm</span> &lt;existing_container_name_or_id&gt;
</code></pre></div></div>

<p>This method essentially involves replicating the existing container with the addition of the new volume. While it’s not a direct modification of the existing container, it achieves the same result by creating a new container with the desired configuration.</p>

<h1 id="3-additional-tips">3. Additional Tips:</h1>

<p>You can list all your Docker volumes using:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker volume <span class="nb">ls</span>
</code></pre></div></div>

<p>To get more details about the shared volume:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker volume inspect shared_volume
</code></pre></div></div>

<p>This will show you where the volume is stored on your host system and other details.</p>

</section>
            </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div></div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<!-- introduce js_includes_ex support -->

<script>

    // Libraries to add dynamic tags below using .html files
    
    
    window.sciptsLib = new Map();
    window.cssLib = new Map();
    window.scipts = new Map();
    window.links = new Map();
    var jsIdIdx = 0;
    var cssIdIdx = 0;
    
    window.sciptsLib.set('bootstrap', [
        {uri: '//cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js'},
        {uri: '//cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js'}
    ]);
    window.cssLib.set('bootstrap', {uri: '//cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css'});
    
    window.sciptsLib.set('prism', {uri: '/dev/os/assets/libs/prism/prism.js', defer: false});
    window.cssLib.set('prism', {uri: '/dev/os/assets/libs/prism/prism.css', defer: false});

    //window.sciptsLib.set('xmind', {uri: '/dev/os/assets/xmind/umd/xmind-embed-viewer.js', defer: false});
    
    // animate is included in head.html to support logo animation in navbar
    // window.cssLib.set('animate', {uri: '//cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css'});
    
    // Add the script tags before the following element
    var getbookStyleElement = document.getElementById("gitbook_style")

    // Adding script tags to externally link js
        keyName = `prism_js`

        if (!window.scipts.get(keyName)) {

            // Get the links from sciptsLib
            jsLinks = window.sciptsLib.get( 'prism');

            if (jsLinks instanceof Array) {
            
                let scriptTags = []            
                
                for (i in jsLinks) {
                    scriptTag = document.createElement("script")
                    scriptTag.src = jsLinks[i]['uri'];                    
                    scriptTag.defer = ('defer' in jsLinks[i]) ? jsLinks[i]['defer'] : true;
                    scriptTag.id =  `prism_js_${jsIdIdx++}`;
                    document.head.insertBefore(scriptTag, getbookStyleElement)
                    
                    scriptTags.push(scriptTag);
                    console.log(scriptTag)
                }

                // Add script tags to window.scripts map object
                window.scipts.set(keyName, scriptTags)
            
            } else if (window.sciptsLib.has( 'prism')) {

                scriptTag = document.createElement("script");
                // console.log("sadasd", prism, jsLinks);
                scriptTag.src = jsLinks['uri'];
                scriptTag.defer = ('defer' in jsLinks) ? jsLinks['defer'] : true;
                scriptTag.id =  `prism_js_${jsIdIdx++}`;
                document.head.insertBefore(scriptTag, getbookStyleElement)
                console.log(scriptTag)

                // Add script tag to window.scripts map object
                window.scipts.set(keyName, scriptTag);
            }
        }


        // Adding link tags to externally link css
        keyName = `prism_css`

        if (!window.scipts.get(keyName)) {

            // Get the links from cssLib
            cssLinks = window.cssLib.get( 'prism');            
            
            if (cssLinks instanceof Array) {
            
                let cssLinkTags = []            
                
                for (i in cssLinks) {
                    cssLinkTag = document.createElement("script")
                    cssLinkTag.href = cssLinks[i]['uri'];
                    cssLinkTag.defer = ('defer' in cssLinks[i]) ? cssLinks[i]['defer'] : true;
                    cssLinkTag.id =  `prism_css_${cssIdIdx++}`;
                    cssLinkTag.rel = 'stylesheet';
                    document.head.insertBefore(cssLinkTag, getbookStyleElement)
                    
                    cssLinkTags.push(cssLinkTag);
                    console.log(cssLinkTag)
                }

                // Add script tags to window.scripts map object
                window.scipts.set(keyName, cssLinkTags)
            
            } else if (window.cssLib.has( 'prism')) {

                cssLinkTag = document.createElement("link")
                cssLinkTag.href = cssLinks['uri'];
                cssLinkTag.defer = ('defer' in cssLinks) ? cssLinks['defer'] : true;
                cssLinkTag.id =  `prism_css_${cssIdIdx++}`;
                cssLinkTag.rel = 'stylesheet';
                document.head.insertBefore(cssLinkTag, getbookStyleElement)

                console.log(cssLinkTag)

                // Add script tag to window.scripts map object
                window.scipts.set(keyName, cssLinkTag);
            }
        }    
        
    

</script>







<!-- introduce mathjax support -->
<script>
    function fixes_chrome_anchors() {
        let chrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        if (window.location.hash && chrome) {
            setTimeout(function () {
                var hash = window.location.hash;
                window.location.hash = "";
                window.location.hash = hash;
            }, 300);
        }
    }

    if (document.readyState === "loading") {
        // Loading hasn't finished yet
        document.addEventListener("DOMContentLoaded", fixes_chrome_anchors);
    } else {
        // `DOMContentLoaded` has already fired
        fixes_chrome_anchors();
    }
</script>


                        <a href="/dev/os/docker/3_docker_2_workflow/" class="navigation navigation-prev navigation-unique hide_element" aria-label="Previous page: 2. Workflow"> <!-- class="hide_element" -->
                            <i class="fa fa-angle-left"></i>
                        </a>
                    

                    
                        <a href="/dev/os/docker/3_docker_4_networking/" class="navigation navigation-next navigation-unique" aria-label="Next page: 4. Networking"> <!-- class="hide_element" -->
                            <i class="fa fa-angle-right"></i>
                        </a>
                    
                    <div class="copyright"><span>&copy; 2024 Intelligent Mind Labs, Inc. All rights reserved.</span>.</div>
                </div>
            </div>

            <script>
                // div "book" element's content is the only content refreshed when nav link is pressed.
                // This functionality is implemented in "gitbook.js" and "theme.js"
                // head.html and footer.html will not be called again and again when a new nav link is clicked
                // Gitbook js is optimized to dynamically change content inside div "book" element.
                // Due to this: script put in the footer will only be called once,
                // which is the very first time the page is loaded by entering
                // the web address in the address bar in the browser
                // 
                $ = jQuery;
                $(function() {
                    // spinnerHide();
                    // setTimeout(spinnerHide, 200);
           
                    $('.childBtn').on('click', function(event) {
                        event.stopImmediatePropagation(); // To prevent following the link (optional)
                        window.location = $(this).attr('link');
                    });

                    $('.parentBtn').on('click', function(event) {
                        window.location = $(this).attr('link');
                    });
                });
            </script>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({
    "page": {
        "title": "Introduction",
        "level": "1.1",
        "depth": 1,
        
        "next": {
            "title": "4. Networking",
            "level": "1.2",
            "depth": 1,
            "path": "_4_containerization/3_docker_4_networking.md",
            "ref": "_4_containerization/3_docker_4_networking.md",
            "articles": []
        },
        
        "dir": "ltr"
    },    "config": {
        "plugins": ["fontsettings", "highlight", "livereload", "lunr", "search", "sharing", "theme-default", "livereload"],
        "styles": {
            "ebook": "styles/ebook.css",
            "epub": "styles/epub.css",
            "mobi": "styles/mobi.css",
            "pdf": "styles/pdf.css",
            "print": "styles/print.css",
            "website": "styles/website.css"
        },
        "pluginsConfig": {
            "expandable-chapter-small2": {
                "articlesExpand": true,
            },
            "fontsettings": {
                "family": "sans",
                "size": 2,
                "theme": "white"
            },
            "highlight": {},
            "livereload": {},
            "lunr": {
                "ignoreSpecialCharacters": false,
                "maxIndexSize": 1000000
            },
            "search": {},            "sharing": {
                "facebook": true,

                "google": false,

                "github": true,
              
                "github_link": "https://github.com",
              

                "telegram": false,
                "telegram_link": "https://t.me",

                "instapaper": false,

                "twitter": true,
              

                "vk": false,

                "weibo": false,

                "all": ["facebook", "google", "twitter", "weibo", "instapaper", "github", "telegram"]
            },
"theme-default": {
                "showLevel": false,
                "styles": {
                    "ebook": "styles/ebook.css",
                    "epub": "styles/epub.css",
                    "mobi": "styles/mobi.css",
                    "pdf": "styles/pdf.css",
                    "print": "styles/print.css",
                    "website": "styles/website.css"
                }
            },
        },
        "theme": "default",
        "author": "Intelligent Mind Labs",
        "pdf": {
            "pageNumbers": true,
            "fontSize": 12,
            "fontFamily": "Arial",
            "paperSize": "a4",
            "chapterMark": "pagebreak",
            "pageBreaksBefore": "/",
            "margin": {
                "right": 62,
                "left": 62,
                "top": 56,
                "bottom": 56
            }
        },
        "structure": {
            "langs": "LANGS.md",
            "readme": "README.md",
        },
        "variables": {},
        "title": "Wiki | O/S",
        "language": "en",
        "gitbook": "*"
    },
    "file": {
        "path": "_4_containerization/3_docker_3_volume.md",
        "mtime": "2019-04-27 00:00:00 +0800",
        "type": "markdown"
    },
    "gitbook": {
        "version": "3.2.3",
        "time": "2024-08-13 08:17:35 +0800"
    },
    "basePath": "/dev/os",
    "book": {
        "language": ""
    }
});
            });

            </script>
        </div><script src="/dev/os/assets/gitbook/gitbook.js"></script>
<script src="/dev/os/assets/gitbook/theme.js"></script>

<script src="/dev/os/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.js" async=""></script>
<!-- <script src="/dev/os/assets/gitbook/gitbook-plugin-copy-code-button/toggle.js"></script> -->
<script src="/dev/os/assets/gitbook/gitbook-plugin-expandable-chapters-small2/expandable-chapters-small.js"></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-search-pro/jquery.mark.min.js" defer=""></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-search-pro/search.js" defer=""></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-sharing/buttons.js" defer=""></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-splitter/splitter.js" defer=""></script>




<!--
<script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script>
-->



<script>
function spinnerHide() {
    $(".spinner-container").removeClass("show_element");
    $(".spinner-container").addClass("hide_element");
    $(".spinner-container").addClass("display_none");
    

    $("#book-search-results").removeClass("hide_element");
    $("#book-search-results").addClass("show_element");

    $(".navigation.navigation-next").removeClass("hide_element");
    $(".navigation.navigation-next").addClass("show_element");

    $(".navigation.navigation-prev").removeClass("hide_element");
    $(".navigation.navigation-prev").addClass("show_element");
}        
</script><!-- trackers --><!-- google analytics --><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V3WBTFTQWG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-V3WBTFTQWG');
</script>
</body>
</html>