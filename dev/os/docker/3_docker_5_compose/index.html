<!DOCTYPE HTML>
<html lang="en" >
    <head><meta charset="UTF-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>5. Docker Compose · Intelligent Mind Labs</title><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="Wikis for Data Science, Computing, Software Development, Math, etc.
"><!-- <meta name="generator" content="Jekyll (using style of GitBook 3.2.3)"> --><meta name="author" content="Intelligent Mind Labs"><!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script> -->

<!-- For logo animation -->
<!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"> -->

<link rel="stylesheet" href="/dev/os/assets/fonts/fa5.15/css/all.min.css">

<link id="gitbook_style" rel="stylesheet" href="/dev/os/assets/gitbook/style.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-expandable-chapters-small2/expandable-chapters-small.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-fontsettings/website.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-search-pro/search.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-splitter/splitter.css">



<!-- <link rel="stylesheet" href="/dev/os/assets/gitbook/rouge/colorful.css"> -->

<style>
@import url('https://fonts.googleapis.com/css2?family=Exo:ital,wght@0,100..900;1,100..900&display=swap');
</style>
    

<link rel="stylesheet" href="/dev/os/assets/gitbook/custom.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/custom-local.css"><style>
.img_url {
    content: url("/dev/os/assets/images/wiki.imindlabs.grey.logo.png");
}

.book.color-theme-2 .img_url {
    content: url("/dev/os/assets/images/wiki.imindlabs.logo.png");
}
</style><link rel="stylesheet" href="/dev/os/assets/gitbook/custom-local-child.css">

<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<!-- <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/dev/os/assets/gitbook/images/apple-touch-icon-precomposed-152.png"> -->
<!-- <link rel="shortcut icon" href="/dev/os/wiki.imindlabs.favicon.png" type="image/x-icon"> -->
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/dev/os/wiki.imindlabs.favicon.png">
<link rel="icon" href="/dev/os/wiki.imindlabs.favicon.png" sizes="32x32" type="image/png">
<link rel="icon" href="/dev/os/wiki.imindlabs.favicon.png" sizes="16x16" type="image/png">
<link rel="shortcut icon" href="/dev/os/wiki.imindlabs.favicon.png" type="image/png">



<!-- trackers -->
            <link rel="prev" href="/dev/os/docker/3_docker_4_networking/" />
        

        
            <link rel="next" href="/dev/os/docker/3_docker_6_container_monitoring/" />
        
    </head>
    <body>         
        <div class="book"><div class="book-summary">
    <script type="text/javascript">
        // Fixes the page links scroll problem on both desktop and mobile browsers
        function pageScrollToTop(element) {
            // both mobile and non-mobile
            $('div.body-inner').animate({ scrollTop: 0 });
            $(element).parent().find('li>ul>li').removeClass('active');
            return true;  // propagate
        }
        // Fixes the anchor links scroll problem on mobile browsers
        function mobilePageScrollToAnchor(element) {
            $(element).closest('li.chapter').find('ul>li').removeClass('active');
            $(element).parent().addClass('active');
            
            // ! BUG: Enable the following functionality on large screen sizes
            // On sub menu item click the page did not navigate. Now it does.
            //if ($(document).width() <= 1240) {
                $('div.body-inner').animate({ scrollTop: $($(element).attr('href')).get(0).offsetTop });
            // }
            return true;
        }
    </script>

    <!-- <div style="text-align:center;" class="animate__animated animate__pulse animate__delay-1s">
        <a href="/dev/os/">
            <img class="logo zoom" src="/dev/os/assets/images/wiki.imindlabs.logo.png" alt="Intelligent Mind Labs wiki logo" />
        </a>
    </div> -->
    <div style="text-align:center;" class="logo-wrap">
        <a href="/dev/os/">
            <img class="logo zoom" src="/dev/os/assets/images/wiki.imindlabs.logo_153x200.webp" alt="Intelligent Mind Labs wiki logo" width="153" height="200"/>
        </a>
    </div>

    <nav role="navigation">
        <div id="book-search-input" role="search">
            <input type="text" placeholder="Type to search" />
        </div>
        <div id="book-search-input-link" role="search">
            <a href="/dev/os/assets/search.html">Click to Search</a>
        </div>
        <ul class="summary">
            
            <li class="chapter" data-level="1.1" data-path="/dev/os">
                
                <a href="/dev/os/" onclick="pageScrollToTop(this)">
                    Wiki | O/S
                </a>
            </li>

            <!-- <li class="divider"></li> -->

            
            <!-- <p>1_windows</p> -->
            
                <p class="collection-title">Windows</p>
            
            
            

            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/1_windows10/">
                
                <a href="/dev/os/windows/1_windows10/" onclick="pageScrollToTop(this)">
                    1. Windows 10
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/2_windows_server2019/">
                
                <a href="/dev/os/windows/2_windows_server2019/" onclick="pageScrollToTop(this)">
                    2. Windows Server 2019
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/3.1_mingw/">
                
                <a href="/dev/os/windows/3.1_mingw/" onclick="pageScrollToTop(this)">
                    3.1. MinGW
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/3.2_cygwin/">
                
                <a href="/dev/os/windows/3.2_cygwin/" onclick="pageScrollToTop(this)">
                    3.2. Cygwin
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/3_wsl/">
                
                <a href="/dev/os/windows/3_wsl/" onclick="pageScrollToTop(this)">
                    3. Linux for Windows (WSL)
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>2_unix</p> -->
            
                <p class="collection-title">Unix Distribution</p>
            
            
            

            
            
            
            <p class="separator-title">Ubuntu</p>
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/linux/1_ubuntu_1_basics/">
                
                <a href="/dev/os/linux/1_ubuntu_1_basics/" onclick="pageScrollToTop(this)">
                    1. Ubuntu Basics
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/linux/1_ubuntu_2_terminal_server/">
                
                <a href="/dev/os/linux/1_ubuntu_2_terminal_server/" onclick="pageScrollToTop(this)">
                    2. Terminal Server
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/linux/2_kali_linux/">
                
                <a href="/dev/os/linux/2_kali_linux/" onclick="pageScrollToTop(this)">
                    2. Kali Linux
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>3_vmachines</p> -->
            
                <p class="collection-title">Virtual Machines</p>
            
            
            

            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/vmmachine/1_vmworkstation/">
                
                <a href="/dev/os/vmmachine/1_vmworkstation/" onclick="pageScrollToTop(this)">
                    1. VM Workstation
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/vmmachine/2_windows_hyper_v/">
                
                <a href="/dev/os/vmmachine/2_windows_hyper_v/" onclick="pageScrollToTop(this)">
                    2. Windows Hyper-V
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>4_containerization</p> -->
            
                <p class="collection-title">Containerization</p>
            
            
            

            
            
            
            <p class="separator-title">Docker</p>
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_0_images/">
                
                <a href="/dev/os/docker/3_docker_0_images/" onclick="pageScrollToTop(this)">
                    0. Images to Download
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_1_fundamentals/">
                
                <a href="/dev/os/docker/3_docker_1_fundamentals/" onclick="pageScrollToTop(this)">
                    1. Fundamentals
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_2_workflow/">
                
                <a href="/dev/os/docker/3_docker_2_workflow/" onclick="pageScrollToTop(this)">
                    2. Workflow
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_3_volume/">
                
                <a href="/dev/os/docker/3_docker_3_volume/" onclick="pageScrollToTop(this)">
                    3. Volumes
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_4_networking/">
                
                <a href="/dev/os/docker/3_docker_4_networking/" onclick="pageScrollToTop(this)">
                    4. Networking
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter active" data-level="1.2" data-path="/dev/os/docker/3_docker_5_compose/">
                
                <a href="/dev/os/docker/3_docker_5_compose/" onclick="pageScrollToTop(this)">
                    5. Docker Compose
                </a>
                
                
                <ul><li><a href="#51-introduction" onclick="mobilePageScrollToAnchor(this)" >5.1 Introduction</a><ul><li><a href="#1-key-features-of-docker-compose" onclick="mobilePageScrollToAnchor(this)" >1. Key Features of Docker Compose:</a></li><li><a href="#2-how-docker-compose-works" onclick="mobilePageScrollToAnchor(this)" >2. How Docker Compose Works:</a></li><li><a href="#3-example-use-case" onclick="mobilePageScrollToAnchor(this)" >3. Example Use Case:</a></li><li><a href="#4-basic-workflow" onclick="mobilePageScrollToAnchor(this)" >4 Basic Workflow:</a></li></ul></li><li><a href="#52-container-orchestration" onclick="mobilePageScrollToAnchor(this)" >5.2 Container Orchestration</a></li><li><a href="#53-example" onclick="mobilePageScrollToAnchor(this)" >5.3 Example</a></li><li><a href="#54-docker-compose-up" onclick="mobilePageScrollToAnchor(this)" >5.4 <code class="language-plaintext highlighter-rouge">docker-compose</code> <code class="language-plaintext highlighter-rouge">up</code></a><ul><li><a href="#1-how-services-work-with-docker-compose-up" onclick="mobilePageScrollToAnchor(this)" >1. How Services Work with <code class="language-plaintext highlighter-rouge">docker-compose</code> <code class="language-plaintext highlighter-rouge">up</code></a></li><li><a href="#2-independence-vs-interdependence" onclick="mobilePageScrollToAnchor(this)" >2. Independence vs. Interdependence</a></li></ul></li><li><a href="#55-share-volumes-in-compose" onclick="mobilePageScrollToAnchor(this)" >5.5 Share Volumes in Compose</a><ul><li><a href="#1-example-sharing-a-volume-between-containers" onclick="mobilePageScrollToAnchor(this)" >1. Example: Sharing a Volume Between Containers</a></li><li><a href="#2-is-volumes-section-mandatory-in-compose" onclick="mobilePageScrollToAnchor(this)" >2. Is <code class="language-plaintext highlighter-rouge">volumes</code> section mandatory in compose?</a><ul><li><a href="#21-without-volumes-section-anonymous-volume" onclick="mobilePageScrollToAnchor(this)" >2.1 Without <code class="language-plaintext highlighter-rouge">volumes</code> Section (Anonymous Volume):</a></li><li><a href="#22-with-volumes-section-named-volume" onclick="mobilePageScrollToAnchor(this)" >2.2 With <code class="language-plaintext highlighter-rouge">volumes</code> Section (Named Volume):</a></li><li><a href="#23-key-differences" onclick="mobilePageScrollToAnchor(this)" >2.3 Key Differences:</a></li></ul></li></ul></li><li><a href="#56-environment-variables" onclick="mobilePageScrollToAnchor(this)" >5.6 Environment variables</a><ul><li><a href="#1-env_file-section" onclick="mobilePageScrollToAnchor(this)" >1. <code class="language-plaintext highlighter-rouge">env_file</code> Section</a></li><li><a href="#2-environment-section" onclick="mobilePageScrollToAnchor(this)" >2. <code class="language-plaintext highlighter-rouge">environment</code> Section</a></li><li><a href="#3-key-differences" onclick="mobilePageScrollToAnchor(this)" >3. Key Differences:</a></li><li><a href="#4-example-of-using-both" onclick="mobilePageScrollToAnchor(this)" >4. Example of Using Both:</a></li></ul></li><li><a href="#57-docker-compose-command-sh--c" onclick="mobilePageScrollToAnchor(this)" >5.7 Docker compose <code class="language-plaintext highlighter-rouge">command</code> <code class="language-plaintext highlighter-rouge">sh</code> <code class="language-plaintext highlighter-rouge">-c</code></a><ul><li><a href="#1-direct-echo-command-example" onclick="mobilePageScrollToAnchor(this)" >1. Direct <code class="language-plaintext highlighter-rouge">echo</code> Command Example:</a></li><li><a href="#2-when-you-need-sh--c" onclick="mobilePageScrollToAnchor(this)" >2. When You Need <code class="language-plaintext highlighter-rouge">sh -c</code>:</a></li></ul></li><li><a href="#57-docker-compose-psuedo-terminal" onclick="mobilePageScrollToAnchor(this)" >5.7 Docker compose Psuedo Terminal</a><ul><li><a href="#1-using-docker-compose-run" onclick="mobilePageScrollToAnchor(this)" >1. Using <code class="language-plaintext highlighter-rouge">docker-compose</code> <code class="language-plaintext highlighter-rouge">run</code></a></li><li><a href="#2-docker-compose-exec" onclick="mobilePageScrollToAnchor(this)" >2. <code class="language-plaintext highlighter-rouge">docker-compose</code> <code class="language-plaintext highlighter-rouge">exec</code></a></li><li><a href="#3-differences-between-run-and-exec" onclick="mobilePageScrollToAnchor(this)" >3. Differences Between <code class="language-plaintext highlighter-rouge">run</code> and <code class="language-plaintext highlighter-rouge">exec</code>:</a></li></ul></li><li><a href="#58-interative-termial-in-docker-composeyaml" onclick="mobilePageScrollToAnchor(this)" >5.8 Interative Termial in <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code></a><ul><li><a href="#1-example-docker-composeyml-with-interactive-terminal" onclick="mobilePageScrollToAnchor(this)" >1. Example <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> with Interactive Terminal:</a></li><li><a href="#2-running-the-service" onclick="mobilePageScrollToAnchor(this)" >2. Running the Service:</a></li></ul></li></ul>

                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_6_container_monitoring/">
                
                <a href="/dev/os/docker/3_docker_6_container_monitoring/" onclick="pageScrollToTop(this)">
                    6. Container Monitoring
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_7_misc/">
                
                <a href="/dev/os/docker/3_docker_7_misc/" onclick="pageScrollToTop(this)">
                    7. Docker Misc
                </a>
                
                
                
            </li>
            
            
            
            <p class="separator-title">Kubernetes</p>
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_1_fundamentals/">
                
                <a href="/dev/os/docker/3_kube_1_fundamentals/" onclick="pageScrollToTop(this)">
                    1. Fundamentals
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_2_kubectl/">
                
                <a href="/dev/os/docker/3_kube_2_kubectl/" onclick="pageScrollToTop(this)">
                    2. kubectl
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_3_deployments/">
                
                <a href="/dev/os/docker/3_kube_3_deployments/" onclick="pageScrollToTop(this)">
                    3. Deployments
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_4_services/">
                
                <a href="/dev/os/docker/3_kube_4_services/" onclick="pageScrollToTop(this)">
                    3. Deployments
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_5_config_secret/">
                
                <a href="/dev/os/docker/3_kube_5_config_secret/" onclick="pageScrollToTop(this)">
                    3. Config and Secret Management
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>5_iotplatforms</p> -->
            
                <p class="collection-title">IoT Platform</p>
            
            
            

            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/iotplatform/1_tensorboard/">
                
                <a href="/dev/os/iotplatform/1_tensorboard/" onclick="pageScrollToTop(this)">
                    1. Home Assistant
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>posts</p> -->
            
            
            

            

            
            
            
        </ul>
    </nav>
</div><div class="book-body">
                <div class="book-header" role="navigation">
                    <!-- Title -->
                    <h1>
                        <i class="fa fa-circle-o-notch fa-spin"></i>
                        
                            <a href="." >5. Docker Compose</a>
                        
                    </h1>
                </div>

                <div class="body-inner"><div class="page-wrapper" tabindex="-1" role="main">
    

    <!-- <div class="spinner-container">
        <div class="spinner-border text-info" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div> -->

    <div class="page-inner">
        <div id="book-search-results"> <!-- class="hide_element" -->            
            <div class="search-noresults">
                <section class="normal markdown-section">
                    
                        <h1 id="/docker/3_docker_5_compose">5. Docker Compose</h1>
                    

                    <h1 id="51-introduction">5.1 Introduction</h1>

<p>Docker Compose is a tool that allows you to define and manage multi-container Docker applications. It uses a YAML file to configure the application’s services, networks, and volumes. With Docker Compose, you can easily manage and deploy complex applications that require multiple services working together, such as web servers, databases, caches, and more.</p>

<h2 id="1-key-features-of-docker-compose">1. Key Features of Docker Compose:</h2>
<p><strong>1. Multi-Container Management:</strong> Define and run multiple containers as a single application. For example, you can set up a web server, database, and cache in one <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file.</p>

<p><strong>2. Declarative Configuration:</strong> The <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file describes the entire application, including its services, networks, and volumes, in a clear and consistent manner.</p>

<p><strong>3. Single Command Deployment:</strong> Start your entire application stack with a single command (<code class="language-plaintext highlighter-rouge">docker-compose up</code>), which builds, creates, and starts all the defined services.</p>

<p><strong>4. Environment-Specific Configurations:</strong> Easily manage different environments (development, testing, production) using environment variables and overriding configurations.</p>

<p><strong>5. Networking:</strong> Automatically sets up a network for your containers, allowing them to communicate with each other using service names as hostnames.</p>

<p><strong>6. Scalability:</strong> You can scale services up or down with a simple command (<code class="language-plaintext highlighter-rouge">docker-compose up --scale &lt;service&gt;=&lt;num&gt;</code>), making it easy to handle more load or reduce resource usage.</p>

<h2 id="2-how-docker-compose-works">2. How Docker Compose Works:</h2>

<p><strong>1. Define your application’s environment</strong> with a <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file.</p>

<p><strong>2. Start your application</strong> by running <code class="language-plaintext highlighter-rouge">docker-compose up</code>.</p>

<p><strong>3. Compose handles</strong> starting and linking your services, creating the network, and attaching any volumes defined.</p>

<h2 id="3-example-use-case">3. Example Use Case:</h2>
<p>Imagine you have a web application that requires:</p>
<ul>
  <li>A web server running Nginx.</li>
  <li>A backend API built with Flask.</li>
  <li>A Redis instance for caching.</li>
</ul>

<p>With Docker Compose, you can define all these services in one file and manage them together. This eliminates the need to manually link containers, manage networks, or define volumes separately.</p>

<h2 id="4-basic-workflow">4 Basic Workflow:</h2>
<p><strong>1. Create a <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file</strong>: This file contains the definitions for your services.</p>

<p><strong>2. Run <code class="language-plaintext highlighter-rouge">docker-compose up</code></strong>: This command builds the images (if needed), creates the containers, and starts all the services defined in the file.</p>

<p><strong>3. Use <code class="language-plaintext highlighter-rouge">docker-compose down</code></strong> to stop and remove all containers, networks, and volumes associated with the Compose file.</p>

<blockquote class="block-tip">
  <h5 id="important">IMPORTANT</h5>

  <p>Docker Compose simplifies the process of running multi-container Docker applications. By defining everything in a single configuration file, it allows you to manage the lifecycle of your application as a whole, from development to production. This is a simple form of container orchestration.</p>
</blockquote>

<h1 id="52-container-orchestration">5.2 Container Orchestration</h1>

<p>Docker Compose is often associated with container orchestration, but it is not a full-fledged container orchestration tool like Kubernetes or Docker Swarm. Instead, Docker Compose is a simpler tool focused on defining and managing multi-container Docker applications in a single host environment.</p>

<p><strong>1. Orchestration Capabilities:</strong></p>
<ul>
  <li><strong>Docker Compose</strong> provides basic orchestration features such as starting, stopping, and scaling containers. It allows you to manage the lifecycle of a group of containers (e.g., web server, database) on a single host.</li>
  <li><strong>Kubernetes/Docker Swarm</strong> provide more advanced orchestration capabilities, including automated deployment, scaling across multiple hosts, self-healing, rolling updates, and more.</li>
</ul>

<p><strong>2. Use Case:</strong></p>
<ul>
  <li><strong>Docker Compose</strong> is ideal for local development, testing environments, and small-scale deployments. It’s particularly useful when all services run on a single machine.</li>
  <li><strong>Full Orchestration Tools</strong> (like Kubernetes) are designed for production environments with complex needs, such as deploying across clusters, managing multiple nodes, and handling distributed systems.</li>
</ul>

<p><strong>3. Single vs. Multi-Host:</strong></p>
<ul>
  <li><strong>Docker Compose</strong> manages containers on a single host. It does not natively support multi-host deployments or sophisticated networking across multiple nodes.</li>
  <li><strong>Kubernetes and Docker Swarm</strong> are designed for managing containers across multiple hosts, supporting large-scale, distributed applications.</li>
</ul>

<blockquote class="block-tip">
  <h5 id="important-1">IMPORTANT</h5>

  <p>While Docker Compose has basic orchestration features, it is not a complete orchestration tool like Kubernetes. Docker Compose is best suited for managing multi-container applications on a single host, making it a powerful tool for development and small-scale production environments. For more complex, distributed, and scalable deployments, a full orchestration system like Kubernetes is required.</p>
</blockquote>

<h1 id="53-example">5.3 Example</h1>

<p>A simple example of a <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file. This example sets up a basic web application with a Python Flask app, a Redis database, and a reverse proxy using Nginx:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">python:3.8-slim</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">flask-app</span>
    <span class="na">working_dir</span><span class="pi">:</span> <span class="s">/app</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./app:/app</span>  <span class="c1"># This is not a named-volume mapping</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">5000:5000"</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">flask run --host=0.0.0.0</span>

  <span class="na">redis</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">redis:alpine</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">redis-db</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">6379:6379"</span>

  <span class="na">nginx</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:alpine</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">nginx-proxy</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">80:80"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./nginx.conf:/etc/nginx/nginx.conf</span>  <span class="c1"># This is not a named-volume mapping</span>
</code></pre></div></div>

<h4 id="structure">Structure:</h4>
<p><strong>1. version:</strong> Defines the version of Docker Compose being used.
<strong>2. services:</strong> Specifies the different services that make up the application.</p>
<ul>
  <li><strong>web:</strong> Runs the Flask app using a Python image.</li>
  <li><strong>redis:</strong> Runs the Redis database.</li>
  <li><strong>nginx:</strong> Uses Nginx as a reverse proxy.
<strong>3. volumes:</strong> Mounts local directories or files to the container.
<strong>4. ports:</strong> Maps container ports to the host.</li>
</ul>

<blockquote class="block-tip">
  <h5 id="tip">TIP</h5>

  <h5 id="when-the-version-field-is-required">When the <code class="language-plaintext highlighter-rouge">version</code> Field is Required:</h5>
  <ul>
    <li><strong>Older Versions of Docker Compose:</strong> If you are using an older version of Docker Compose (pre-3.9), the <code class="language-plaintext highlighter-rouge">version</code> field is mandatory to specify the version of the Compose file format.</li>
  </ul>

  <h5 id="when-the-version-field-is-optional">When the <code class="language-plaintext highlighter-rouge">version</code> Field is Optional:</h5>
  <ul>
    <li><strong>Docker Compose 3.9 and Later:</strong> In Docker Compose version 3.9 and above, you can omit the <code class="language-plaintext highlighter-rouge">version</code> field, and Docker will assume you are using the latest schema.</li>
  </ul>

  <p>If you aim for compatibility with older environments or prefer to explicitly control the schema version, including the <code class="language-plaintext highlighter-rouge">version</code> field is still a good practice.</p>
</blockquote>

<h4 id="how-to-use-docker-composeyaml">How to Use <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code>:</h4>
<ol>
  <li>Place this <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> in the root directory of your project.</li>
  <li>Run <code class="language-plaintext highlighter-rouge">docker-compose up</code> in the terminal to start all services.</li>
</ol>

<blockquote class="block-tip">
  <h5 id="tip-1">TIP</h5>

  <p>To detach from the docker-compose prompt and get back to host PC’s prompt, use:
<code class="language-plaintext highlighter-rouge">docker-compose up -d</code></p>
</blockquote>

<p>You can customize the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> to fit your specific application needs, such as adding databases, additional services, or scaling your application.</p>

<h1 id="54-docker-compose-up">5.4 <code class="language-plaintext highlighter-rouge">docker-compose</code> <code class="language-plaintext highlighter-rouge">up</code></h1>

<p>When you run <code class="language-plaintext highlighter-rouge">docker-compose up</code>, it starts all the services defined in your <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file, but these services are not entirely independent—they are designed to work together as part of a multi-container application.</p>

<h2 id="1-how-services-work-with-docker-compose-up">1. How Services Work with <code class="language-plaintext highlighter-rouge">docker-compose</code> <code class="language-plaintext highlighter-rouge">up</code></h2>

<ol>
  <li><strong>Dependency Management:</strong>
    <ul>
      <li>Docker Compose respects the dependencies between services. For example, if your <code class="language-plaintext highlighter-rouge">web</code> service depends on a <code class="language-plaintext highlighter-rouge">database</code> service, Docker Compose ensures that the <code class="language-plaintext highlighter-rouge">database</code> service is started before the <code class="language-plaintext highlighter-rouge">web</code> service.</li>
      <li>You can explicitly define dependencies using the <code class="language-plaintext highlighter-rouge">depends_on</code> key in the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file.</li>
    </ul>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">database</span>
  <span class="na">database</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">postgres</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Network Connectivity:</strong>
    <ul>
      <li>By default, Docker Compose creates a network for all the services to communicate with each other. Services can reach one another by their service names (e.g., <code class="language-plaintext highlighter-rouge">database</code> in the example above).</li>
      <li>Even though the services run in separate containers, they are interconnected and can communicate over this internal network.</li>
    </ul>
  </li>
  <li><strong>Parallel Start:</strong>
    <ul>
      <li>Services are typically started in parallel, but if one service depends on another, Docker Compose ensures that the dependent service is ready before proceeding.</li>
    </ul>
  </li>
  <li><strong>Shared Volumes:</strong>
    <ul>
      <li>If services share a volume, they can read/write to the same data. This ensures that data is consistent across services that need to interact with the same files.</li>
    </ul>
  </li>
</ol>

<h2 id="2-independence-vs-interdependence">2. Independence vs. Interdependence</h2>

<ul>
  <li><strong>Independent Execution:</strong> Each service runs in its own container with its own environment, which means they are isolated and can run independently.</li>
  <li><strong>Interdependence:</strong> Despite their independent execution, services are often designed to work together as part of the same application (e.g., a web server connecting to a database).</li>
</ul>

<h4 id="example-of-docker-compose-up-execution">Example of <code class="language-plaintext highlighter-rouge">docker-compose up</code> Execution:</h4>

<p>Given a <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file with two services:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">nginx</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">80:80"</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">app</span>

  <span class="na">app</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">python:3.8</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">python app.py</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">docker-compose up</code> will:
    <ol>
      <li>Start the <code class="language-plaintext highlighter-rouge">app</code> service.</li>
      <li>Once <code class="language-plaintext highlighter-rouge">app</code> is running, start the <code class="language-plaintext highlighter-rouge">web</code> service.</li>
    </ol>
  </li>
</ul>

<h1 id="55-share-volumes-in-compose">5.5 Share Volumes in Compose</h1>

<p>In Docker Compose, you can share volumes between containers by defining a named volume and then mounting it in multiple services. This allows containers to share data, such as configuration files or persistent storage.</p>

<h2 id="1-example-sharing-a-volume-between-containers">1. Example: Sharing a Volume Between Containers</h2>

<p>Let’s say you have two services: <code class="language-plaintext highlighter-rouge">app</code> and <code class="language-plaintext highlighter-rouge">worker</code>. Both need to access a shared directory where they read and write data.</p>

<p>Here’s how you can define and use a shared volume in a <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">app</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">python:3.8-slim</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">app-container</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">shared-data:/data</span>   <span class="c1"># This is a named-volume</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">python /data/app.py</span>

  <span class="na">worker</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">python:3.8-slim</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">worker-container</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">shared-data:/data</span>   <span class="c1"># This is a named-volume</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">python /data/worker.py</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">shared-data</span><span class="pi">:</span>  <span class="c1"># named-volume definition</span>
</code></pre></div></div>

<blockquote class="block-warning">
  <h5 id="important-2">IMPORTANT</h5>

  <p>Named volumes will not be created on the fly. They must be defined in the <code class="language-plaintext highlighter-rouge">volumes:</code> section seperately in the <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code> file.</p>
</blockquote>

<p><strong>1. services:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">app</code> and <code class="language-plaintext highlighter-rouge">worker</code> are two services that both mount the <code class="language-plaintext highlighter-rouge">shared-data</code> volume to the <code class="language-plaintext highlighter-rouge">/data</code> directory inside their containers.</li>
  <li>Both services can read and write to the <code class="language-plaintext highlighter-rouge">/data</code> directory, and any changes made by one service will be visible to the other.</li>
</ul>

<p><strong>2. volumes:</strong></p>
<ul>
  <li>The <code class="language-plaintext highlighter-rouge">volumes</code> section at the bottom defines the named volume <code class="language-plaintext highlighter-rouge">shared-data</code>.</li>
  <li>Docker manages this volume and ensures it persists across container restarts.</li>
</ul>

<h4 id="how-it-works">How It Works:</h4>
<ul>
  <li>When you run <code class="language-plaintext highlighter-rouge">docker-compose up</code>, Docker will create the <code class="language-plaintext highlighter-rouge">shared-data</code> volume if it doesn’t exist, and mount it to the specified directories inside the <code class="language-plaintext highlighter-rouge">app</code> and <code class="language-plaintext highlighter-rouge">worker</code> containers.</li>
  <li>Both containers can access and modify files in the <code class="language-plaintext highlighter-rouge">/data</code> directory, enabling them to share data.</li>
</ul>

<p>This approach is useful for scenarios like sharing logs, configuration files, or temporary data between different services in your Docker Compose setup.</p>

<h2 id="2-is-volumes-section-mandatory-in-compose">2. Is <code class="language-plaintext highlighter-rouge">volumes</code> section mandatory in compose?</h2>

<p>The <code class="language-plaintext highlighter-rouge">volumes</code> section in Docker Compose is not mandatory but is often used for named volumes. Named volumes are useful when you need persistent storage that is managed by Docker, shared between multiple containers, or reused across services.</p>

<p>However, if you define a volume directly in a service without explicitly declaring it under the <code class="language-plaintext highlighter-rouge">volumes</code> section, Docker will automatically treat it as an anonymous volume. Here’s a comparison:</p>

<h3 id="21-without-volumes-section-anonymous-volume">2.1 Without <code class="language-plaintext highlighter-rouge">volumes</code> Section (Anonymous Volume):</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">app</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">python:3.8-slim</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">app-container</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/data</span>

  <span class="na">worker</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">python:3.8-slim</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">worker-container</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/data</span>
</code></pre></div></div>

<p>In this case, Docker will create an anonymous volume for each service. These volumes are not shared, and their lifecycle is tied to the container.</p>

<h3 id="22-with-volumes-section-named-volume">2.2 With <code class="language-plaintext highlighter-rouge">volumes</code> Section (Named Volume):</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">app</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">python:3.8-slim</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">app-container</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">shared-data:/data</span>

  <span class="na">worker</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">python:3.8-slim</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">worker-container</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">shared-data:/data</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">shared-data</span><span class="pi">:</span>
</code></pre></div></div>

<p>Here, the <code class="language-plaintext highlighter-rouge">volumes</code> section defines a named volume <code class="language-plaintext highlighter-rouge">shared-data</code> (you can see this in docker desktop volumes tab). Both services can access this same volume, and it persists independently of the containers.</p>

<h3 id="23-key-differences">2.3 Key Differences:</h3>
<ul>
  <li><strong>Named Volumes:</strong> Defined explicitly under the <code class="language-plaintext highlighter-rouge">volumes</code> section. These can be shared between containers and persist even if containers are removed.</li>
  <li><strong>Anonymous Volumes:</strong> Created automatically if you omit the <code class="language-plaintext highlighter-rouge">volumes</code> section. They are container-specific and not shared unless explicitly defined.</li>
</ul>

<p>If you need to share data between containers, defining the volume under the <code class="language-plaintext highlighter-rouge">volumes</code> section is recommended.</p>

<h1 id="56-environment-variables">5.6 Environment variables</h1>

<p>In Docker Compose, both the <code class="language-plaintext highlighter-rouge">env_file</code> and <code class="language-plaintext highlighter-rouge">environment</code> sections are used to set environment variables for services, but they serve slightly different purposes and are used in different ways.</p>

<h2 id="1-env_file-section">1. <code class="language-plaintext highlighter-rouge">env_file</code> Section</h2>

<p>The <code class="language-plaintext highlighter-rouge">env_file</code> section specifies a file that contains environment variable definitions. Each variable is defined on a new line in the file in the format <code class="language-plaintext highlighter-rouge">KEY=VALUE</code>. Docker Compose reads this file and sets the environment variables in the service’s container.</p>

<h4 id="usage">Usage:</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">nginx</span>
    <span class="na">env_file</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.env</span>
      <span class="pi">-</span> <span class="s">./config/env.list</span>
</code></pre></div></div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">.env</code></strong> and <strong><code class="language-plaintext highlighter-rouge">./config/env.list</code></strong> are files containing environment variables.</li>
  <li>The environment variables from these files are loaded into the container.</li>
</ul>

<h4 id="example-env-file">Example <code class="language-plaintext highlighter-rouge">.env</code> File:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DATABASE_URL=postgres://user:password@db:5432/mydatabase
SECRET_KEY=mysecretkey
</code></pre></div></div>

<h2 id="2-environment-section">2. <code class="language-plaintext highlighter-rouge">environment</code> Section</h2>

<p>The <code class="language-plaintext highlighter-rouge">environment</code> section allows you to define environment variables directly within the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file. You can list individual variables and their values directly under this section.</p>

<h4 id="usage-1">Usage:</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">nginx</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">DATABASE_URL=postgres://user:password@db:5432/mydatabase</span>
      <span class="pi">-</span> <span class="s">SECRET_KEY=mysecretkey</span>
</code></pre></div></div>

<ul>
  <li>Variables are specified directly in the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file, which is useful for simple configurations or when you want to keep environment settings directly in the compose file.</li>
</ul>

<h2 id="3-key-differences">3. Key Differences:</h2>

<p><strong>1. Source:</strong></p>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">env_file</code>:</strong> Loads environment variables from external files. This is useful for managing variables outside the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file, which can be useful for secrets, configuration files, or shared environment settings.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">environment</code>:</strong> Defines environment variables directly in the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file. This is useful for straightforward configurations or when the variables are not sensitive.</li>
</ul>

<p><strong>2. File Format:</strong></p>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">env_file</code>:</strong> Uses a separate file (or files) where each line is a key-value pair.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">environment</code>:</strong> Defines variables inline, using a list format.</li>
</ul>

<p><strong>3. Multiple Files:</strong></p>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">env_file</code>:</strong> Can specify multiple files, and environment variables from these files are merged, with later files overriding variables from earlier files if there are conflicts.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">environment</code>:</strong> Can only define variables directly in the compose file and does not support merging with external files.</li>
</ul>

<h2 id="4-example-of-using-both">4. Example of Using Both:</h2>

<p>You can use both sections together if needed:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">busybox</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">sh -c 'sleep 2 &amp;&amp; env'</span>
    <span class="c1"># will run `sleep 2` and `env` shell commands inside a shell process</span>
    <span class="c1"># `env` command will print the environment variables</span>

    <span class="na">env_file</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.env</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">DEBUG=true</span>
</code></pre></div></div>

<p>In this example:</p>
<ul>
  <li>Environment variables from <code class="language-plaintext highlighter-rouge">.env</code> file are loaded.</li>
  <li>The <code class="language-plaintext highlighter-rouge">DEBUG</code> variable is also set directly in the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file, which could override any similar variable defined in the <code class="language-plaintext highlighter-rouge">.env</code> file.</li>
</ul>

<blockquote class="block-tip">
  <h5 id="important-3">IMPORTANT</h5>

  <ul>
    <li><strong><code class="language-plaintext highlighter-rouge">env_file</code>:</strong> Loads environment variables from external files.</li>
    <li><strong><code class="language-plaintext highlighter-rouge">environment</code>:</strong> Defines environment variables directly in the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file.</li>
  </ul>
</blockquote>

<p>Choosing between these depends on your needs for managing configuration and secrets in your Docker Compose setup.</p>

<h1 id="57-docker-compose-command-sh--c">5.7 Docker compose <code class="language-plaintext highlighter-rouge">command</code> <code class="language-plaintext highlighter-rouge">sh</code> <code class="language-plaintext highlighter-rouge">-c</code></h1>

<p>You can definitely use the <code class="language-plaintext highlighter-rouge">echo</code> command directly in Docker Compose without needing to wrap it in <code class="language-plaintext highlighter-rouge">sh -c</code>. However, the <code class="language-plaintext highlighter-rouge">sh -c</code> approach is necessary when you want to execute <strong>multiple commands</strong> or use shell features like conditional execution, loops, or variable expansion.</p>

<h2 id="1-direct-echo-command-example">1. Direct <code class="language-plaintext highlighter-rouge">echo</code> Command Example:</h2>
<p>If you only want to run a single command like <code class="language-plaintext highlighter-rouge">echo</code>, you can specify it directly in the <code class="language-plaintext highlighter-rouge">command</code> section without <code class="language-plaintext highlighter-rouge">sh -c</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">ubuntu_service</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ubuntu:latest</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">my_ubuntu_container</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">echo "Hello from Docker Compose!"</span>
</code></pre></div></div>

<h2 id="2-when-you-need-sh--c">2. When You Need <code class="language-plaintext highlighter-rouge">sh -c</code>:</h2>
<p>The <code class="language-plaintext highlighter-rouge">sh -c</code> is required when you need to execute multiple commands in sequence, use shell operators (<code class="language-plaintext highlighter-rouge">&amp;&amp;</code>, <code class="language-plaintext highlighter-rouge">||</code>, etc.), or work with more complex command structures:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">ubuntu_service</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ubuntu:latest</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">my_ubuntu_container</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">sh -c "echo 'Updating packages...' &amp;&amp; apt-get update &amp;&amp; echo 'Setup complete!'"</span>
</code></pre></div></div>

<blockquote class="block-tip">
  <h5 id="tip-2">TIP</h5>

  <ul>
    <li><strong>Single Command</strong>: If you have just one simple command (like <code class="language-plaintext highlighter-rouge">echo</code>), you can use it directly without <code class="language-plaintext highlighter-rouge">sh -c</code>.</li>
    <li><strong>Multiple Commands/Complex Logic</strong>: Use <code class="language-plaintext highlighter-rouge">sh -c</code> when you need to run multiple commands or use shell features.</li>
  </ul>
</blockquote>

<p>The use of <code class="language-plaintext highlighter-rouge">sh -c</code> provides flexibility and allows you to do more complex operations within a single <code class="language-plaintext highlighter-rouge">command</code> field in Docker Compose.</p>

<h1 id="57-docker-compose-psuedo-terminal">5.7 Docker compose Psuedo Terminal</h1>

<p>To open a pseudo-terminal (interactive terminal) with Docker Compose, you can use the <code class="language-plaintext highlighter-rouge">docker-compose run</code> or <code class="language-plaintext highlighter-rouge">docker-compose exec</code> command with the <code class="language-plaintext highlighter-rouge">-it</code> option. This is useful for running commands interactively inside a container, such as opening a shell session.</p>

<h2 id="1-using-docker-compose-run">1. Using <code class="language-plaintext highlighter-rouge">docker-compose</code> <code class="language-plaintext highlighter-rouge">run</code></h2>
<p>The <code class="language-plaintext highlighter-rouge">docker-compose run</code> command creates and runs a new container based on the service definition. The <code class="language-plaintext highlighter-rouge">-it</code> option is used to allocate a pseudo-TTY and keep it interactive.</p>

<h4 id="example">Example:</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose run <span class="nt">-it</span> &lt;service_name&gt; /bin/bash
</code></pre></div></div>

<ul>
  <li>Replace <code class="language-plaintext highlighter-rouge">&lt;service_name&gt;</code> with the name of the service you want to interact with (e.g., <code class="language-plaintext highlighter-rouge">web</code>, <code class="language-plaintext highlighter-rouge">app</code>, <code class="language-plaintext highlighter-rouge">db</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">/bin/bash</code> is the command to run inside the container. You can replace this with any other command.</li>
</ul>

<h2 id="2-docker-compose-exec">2. <code class="language-plaintext highlighter-rouge">docker-compose</code> <code class="language-plaintext highlighter-rouge">exec</code></h2>
<p>The <code class="language-plaintext highlighter-rouge">docker-compose exec</code> command is used to run a command inside an already running container. It’s the preferred method if your container is already up and running.</p>

<h4 id="example-1">Example:</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose <span class="nb">exec</span> <span class="nt">-it</span> &lt;service_name&gt; /bin/bash
</code></pre></div></div>

<ul>
  <li>Replace <code class="language-plaintext highlighter-rouge">&lt;service_name&gt;</code> with the name of the running service you want to access.</li>
  <li>This will open a bash shell in the running container.</li>
</ul>

<h2 id="3-differences-between-run-and-exec">3. Differences Between <code class="language-plaintext highlighter-rouge">run</code> and <code class="language-plaintext highlighter-rouge">exec</code>:</h2>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">run</code></strong>: Starts a new container for the specified service. It is useful for one-off tasks or testing commands in a fresh container.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">exec</code></strong>: Attaches to an already running container. Use this when you need to interact with an existing service.</li>
</ul>

<h4 id="example-scenario">Example Scenario:</h4>

<p>Suppose you have a <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file with a service named <code class="language-plaintext highlighter-rouge">web</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">nginx</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">80:80"</span>
</code></pre></div></div>

<p><strong>1. Open a new container with a terminal:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker-compose run <span class="nt">-it</span> web /bin/bash
</code></pre></div></div>
<p>This command starts a new <code class="language-plaintext highlighter-rouge">nginx</code> container and drops you into an interactive shell.</p>

<p><strong>2. Access an existing running container:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   docker-compose up <span class="nt">-d</span>  <span class="c"># Start services in the background</span>
   docker-compose <span class="nb">exec</span> <span class="nt">-it</span> web /bin/bash
</code></pre></div></div>
<p>This command attaches to the running <code class="language-plaintext highlighter-rouge">web</code> container and gives you a bash shell.</p>

<blockquote class="block-tip">
  <h5 id="tip-3">TIP</h5>

  <ul>
    <li>Use <code class="language-plaintext highlighter-rouge">docker-compose run -it &lt;service_name&gt; /bin/bash</code> to start a new container and open a terminal.</li>
    <li>Use <code class="language-plaintext highlighter-rouge">docker-compose exec -it &lt;service_name&gt; /bin/bash</code> to open a terminal in an already running container.</li>
  </ul>
</blockquote>

<h1 id="58-interative-termial-in-docker-composeyaml">5.8 Interative Termial in <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code></h1>

<p>To specify an interactive terminal within the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file, you can use the <code class="language-plaintext highlighter-rouge">stdin_open</code> and <code class="language-plaintext highlighter-rouge">tty</code> options. These options ensure that the container starts with an interactive terminal available. This is particularly useful when you want to run a service in a way that you can interact with it directly, such as when using a shell.</p>

<h2 id="1-example-docker-composeyml-with-interactive-terminal">1. Example <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> with Interactive Terminal:</h2>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">myservice</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ubuntu:latest</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">/bin/bash</span>  <span class="c1"># Command to run when the container starts</span>
    <span class="na">stdin_open</span><span class="pi">:</span> <span class="kc">true</span>    <span class="c1"># Keeps stdin open to allow interactive input</span>
    <span class="na">tty</span><span class="pi">:</span> <span class="kc">true</span>           <span class="c1"># Allocates a pseudo-TTY</span>
</code></pre></div></div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">stdin_open: true</code>:</strong> Keeps the standard input (stdin) open, which is necessary for interactive sessions.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">tty: true</code>:</strong> Allocates a pseudo-TTY, which is required for terminal interaction.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">command: /bin/bash</code>:</strong> Runs the <code class="language-plaintext highlighter-rouge">bash</code> shell, allowing interaction when the container starts.</li>
</ul>

<h2 id="2-running-the-service">2. Running the Service:</h2>

<p>When you run the service with <code class="language-plaintext highlighter-rouge">docker-compose up -d</code>, the container will start with an interactive terminal and detach. To interact with it, use the <code class="language-plaintext highlighter-rouge">docker attach</code> command or access it via <code class="language-plaintext highlighter-rouge">docker-compose exec</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose up

<span class="c"># or </span>

docker-compose up <span class="nt">-d</span> <span class="c"># run in background</span>
</code></pre></div></div>

<p>Then, in a separate terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker attach &lt;container_name&gt;  
<span class="c"># attach to main bash process in ubunutu</span>
</code></pre></div></div>

<p>Or:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose <span class="nb">exec </span>myservice /bin/bash
<span class="c"># attach to a new bash process in ubunutu</span>
</code></pre></div></div>

<blockquote class="block-tip">
  <h5 id="important-4">IMPORTANT</h5>

  <p>By setting <code class="language-plaintext highlighter-rouge">stdin_open: true</code> and <code class="language-plaintext highlighter-rouge">tty: true</code> in the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file, you ensure that your container is prepared for interactive use, allowing you to run commands or scripts that require user interaction.</p>
</blockquote>
</section>
            </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div></div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<!-- introduce js_includes_ex support -->

<script>

    // Libraries to add dynamic tags below using .html files
    
    
    window.sciptsLib = new Map();
    window.cssLib = new Map();
    window.scipts = new Map();
    window.links = new Map();
    var jsIdIdx = 0;
    var cssIdIdx = 0;
    
    window.sciptsLib.set('bootstrap', [
        {uri: '//cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js'},
        {uri: '//cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js'}
    ]);
    window.cssLib.set('bootstrap', {uri: '//cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css'});
    
    window.sciptsLib.set('prism', {uri: '/dev/os/assets/libs/prism/prism.js', defer: false});
    window.cssLib.set('prism', {uri: '/dev/os/assets/libs/prism/prism.css', defer: false});

    //window.sciptsLib.set('xmind', {uri: '/dev/os/assets/xmind/umd/xmind-embed-viewer.js', defer: false});
    
    // animate is included in head.html to support logo animation in navbar
    // window.cssLib.set('animate', {uri: '//cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css'});
    
    // Add the script tags before the following element
    var getbookStyleElement = document.getElementById("gitbook_style")

    // Adding script tags to externally link js
        keyName = `prism_js`

        if (!window.scipts.get(keyName)) {

            // Get the links from sciptsLib
            jsLinks = window.sciptsLib.get( 'prism');

            if (jsLinks instanceof Array) {
            
                let scriptTags = []            
                
                for (i in jsLinks) {
                    scriptTag = document.createElement("script")
                    scriptTag.src = jsLinks[i]['uri'];                    
                    scriptTag.defer = ('defer' in jsLinks[i]) ? jsLinks[i]['defer'] : true;
                    scriptTag.id =  `prism_js_${jsIdIdx++}`;
                    document.head.insertBefore(scriptTag, getbookStyleElement)
                    
                    scriptTags.push(scriptTag);
                    console.log(scriptTag)
                }

                // Add script tags to window.scripts map object
                window.scipts.set(keyName, scriptTags)
            
            } else if (window.sciptsLib.has( 'prism')) {

                scriptTag = document.createElement("script");
                // console.log("sadasd", prism, jsLinks);
                scriptTag.src = jsLinks['uri'];
                scriptTag.defer = ('defer' in jsLinks) ? jsLinks['defer'] : true;
                scriptTag.id =  `prism_js_${jsIdIdx++}`;
                document.head.insertBefore(scriptTag, getbookStyleElement)
                console.log(scriptTag)

                // Add script tag to window.scripts map object
                window.scipts.set(keyName, scriptTag);
            }
        }


        // Adding link tags to externally link css
        keyName = `prism_css`

        if (!window.scipts.get(keyName)) {

            // Get the links from cssLib
            cssLinks = window.cssLib.get( 'prism');            
            
            if (cssLinks instanceof Array) {
            
                let cssLinkTags = []            
                
                for (i in cssLinks) {
                    cssLinkTag = document.createElement("script")
                    cssLinkTag.href = cssLinks[i]['uri'];
                    cssLinkTag.defer = ('defer' in cssLinks[i]) ? cssLinks[i]['defer'] : true;
                    cssLinkTag.id =  `prism_css_${cssIdIdx++}`;
                    cssLinkTag.rel = 'stylesheet';
                    document.head.insertBefore(cssLinkTag, getbookStyleElement)
                    
                    cssLinkTags.push(cssLinkTag);
                    console.log(cssLinkTag)
                }

                // Add script tags to window.scripts map object
                window.scipts.set(keyName, cssLinkTags)
            
            } else if (window.cssLib.has( 'prism')) {

                cssLinkTag = document.createElement("link")
                cssLinkTag.href = cssLinks['uri'];
                cssLinkTag.defer = ('defer' in cssLinks) ? cssLinks['defer'] : true;
                cssLinkTag.id =  `prism_css_${cssIdIdx++}`;
                cssLinkTag.rel = 'stylesheet';
                document.head.insertBefore(cssLinkTag, getbookStyleElement)

                console.log(cssLinkTag)

                // Add script tag to window.scripts map object
                window.scipts.set(keyName, cssLinkTag);
            }
        }    
        
    

</script>







<!-- introduce mathjax support -->
<script>
    function fixes_chrome_anchors() {
        let chrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        if (window.location.hash && chrome) {
            setTimeout(function () {
                var hash = window.location.hash;
                window.location.hash = "";
                window.location.hash = hash;
            }, 300);
        }
    }

    if (document.readyState === "loading") {
        // Loading hasn't finished yet
        document.addEventListener("DOMContentLoaded", fixes_chrome_anchors);
    } else {
        // `DOMContentLoaded` has already fired
        fixes_chrome_anchors();
    }
</script>


                        <a href="/dev/os/docker/3_docker_4_networking/" class="navigation navigation-prev navigation-unique hide_element" aria-label="Previous page: 4. Networking"> <!-- class="hide_element" -->
                            <i class="fa fa-angle-left"></i>
                        </a>
                    

                    
                        <a href="/dev/os/docker/3_docker_6_container_monitoring/" class="navigation navigation-next navigation-unique" aria-label="Next page: 6. Container Monitoring"> <!-- class="hide_element" -->
                            <i class="fa fa-angle-right"></i>
                        </a>
                    
                    <div class="copyright"><span>&copy; 2024 Intelligent Mind Labs, Inc. All rights reserved.</span>.</div>
                </div>
            </div>

            <script>
                // div "book" element's content is the only content refreshed when nav link is pressed.
                // This functionality is implemented in "gitbook.js" and "theme.js"
                // head.html and footer.html will not be called again and again when a new nav link is clicked
                // Gitbook js is optimized to dynamically change content inside div "book" element.
                // Due to this: script put in the footer will only be called once,
                // which is the very first time the page is loaded by entering
                // the web address in the address bar in the browser
                // 
                $ = jQuery;
                $(function() {
                    // spinnerHide();
                    // setTimeout(spinnerHide, 200);
           
                    $('.childBtn').on('click', function(event) {
                        event.stopImmediatePropagation(); // To prevent following the link (optional)
                        window.location = $(this).attr('link');
                    });

                    $('.parentBtn').on('click', function(event) {
                        window.location = $(this).attr('link');
                    });
                });
            </script>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({
    "page": {
        "title": "Introduction",
        "level": "1.1",
        "depth": 1,
        
        "next": {
            "title": "6. Container Monitoring",
            "level": "1.2",
            "depth": 1,
            "path": "_4_containerization/3_docker_6_container_monitoring.md",
            "ref": "_4_containerization/3_docker_6_container_monitoring.md",
            "articles": []
        },
        
        "dir": "ltr"
    },    "config": {
        "plugins": ["fontsettings", "highlight", "livereload", "lunr", "search", "sharing", "theme-default", "livereload"],
        "styles": {
            "ebook": "styles/ebook.css",
            "epub": "styles/epub.css",
            "mobi": "styles/mobi.css",
            "pdf": "styles/pdf.css",
            "print": "styles/print.css",
            "website": "styles/website.css"
        },
        "pluginsConfig": {
            "expandable-chapter-small2": {
                "articlesExpand": true,
            },
            "fontsettings": {
                "family": "sans",
                "size": 2,
                "theme": "white"
            },
            "highlight": {},
            "livereload": {},
            "lunr": {
                "ignoreSpecialCharacters": false,
                "maxIndexSize": 1000000
            },
            "search": {},            "sharing": {
                "facebook": true,

                "google": false,

                "github": true,
              
                "github_link": "https://github.com",
              

                "telegram": false,
                "telegram_link": "https://t.me",

                "instapaper": false,

                "twitter": true,
              

                "vk": false,

                "weibo": false,

                "all": ["facebook", "google", "twitter", "weibo", "instapaper", "github", "telegram"]
            },
"theme-default": {
                "showLevel": false,
                "styles": {
                    "ebook": "styles/ebook.css",
                    "epub": "styles/epub.css",
                    "mobi": "styles/mobi.css",
                    "pdf": "styles/pdf.css",
                    "print": "styles/print.css",
                    "website": "styles/website.css"
                }
            },
        },
        "theme": "default",
        "author": "Intelligent Mind Labs",
        "pdf": {
            "pageNumbers": true,
            "fontSize": 12,
            "fontFamily": "Arial",
            "paperSize": "a4",
            "chapterMark": "pagebreak",
            "pageBreaksBefore": "/",
            "margin": {
                "right": 62,
                "left": 62,
                "top": 56,
                "bottom": 56
            }
        },
        "structure": {
            "langs": "LANGS.md",
            "readme": "README.md",
        },
        "variables": {},
        "title": "Wiki | O/S",
        "language": "en",
        "gitbook": "*"
    },
    "file": {
        "path": "_4_containerization/3_docker_5_compose.md",
        "mtime": "2019-04-27 00:00:00 +0800",
        "type": "markdown"
    },
    "gitbook": {
        "version": "3.2.3",
        "time": "2024-08-26 10:32:47 +0800"
    },
    "basePath": "/dev/os",
    "book": {
        "language": ""
    }
});
            });

            </script>
        </div><script src="/dev/os/assets/gitbook/gitbook.js"></script>
<script src="/dev/os/assets/gitbook/theme.js"></script>

<script src="/dev/os/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.js" async=""></script>
<!-- <script src="/dev/os/assets/gitbook/gitbook-plugin-copy-code-button/toggle.js"></script> -->
<script src="/dev/os/assets/gitbook/gitbook-plugin-expandable-chapters-small2/expandable-chapters-small.js"></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-search-pro/jquery.mark.min.js" defer=""></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-search-pro/search.js" defer=""></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-sharing/buttons.js" defer=""></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-splitter/splitter.js" defer=""></script>




<!--
<script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script>
-->



<script>
function spinnerHide() {
    $(".spinner-container").removeClass("show_element");
    $(".spinner-container").addClass("hide_element");
    $(".spinner-container").addClass("display_none");
    

    $("#book-search-results").removeClass("hide_element");
    $("#book-search-results").addClass("show_element");

    $(".navigation.navigation-next").removeClass("hide_element");
    $(".navigation.navigation-next").addClass("show_element");

    $(".navigation.navigation-prev").removeClass("hide_element");
    $(".navigation.navigation-prev").addClass("show_element");
}        
</script><!-- trackers --><!-- google analytics --><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V3WBTFTQWG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-V3WBTFTQWG');
</script>
</body>
</html>