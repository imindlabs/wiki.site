<!DOCTYPE HTML>
<html lang="en" >
    <head><meta charset="UTF-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>2. Workflow · Intelligent Mind Labs</title><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="Wikis for Data Science, Computing, Software Development, Math, etc.
"><!-- <meta name="generator" content="Jekyll (using style of GitBook 3.2.3)"> --><meta name="author" content="Intelligent Mind Labs"><!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script> -->

<!-- For logo animation -->
<!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"> -->

<link rel="stylesheet" href="/dev/os/assets/fonts/fa5.15/css/all.min.css">

<link id="gitbook_style" rel="stylesheet" href="/dev/os/assets/gitbook/style.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-expandable-chapters-small2/expandable-chapters-small.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-fontsettings/website.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-search-pro/search.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/gitbook-plugin-splitter/splitter.css">



<!-- <link rel="stylesheet" href="/dev/os/assets/gitbook/rouge/colorful.css"> -->

<style>
@import url('https://fonts.googleapis.com/css2?family=Exo:ital,wght@0,100..900;1,100..900&display=swap');
</style>
    

<link rel="stylesheet" href="/dev/os/assets/gitbook/custom.css">
<link rel="stylesheet" href="/dev/os/assets/gitbook/custom-local.css"><style>
.img_url {
    content: url("/dev/os/assets/images/wiki.imindlabs.grey.logo.png");
}

.book.color-theme-2 .img_url {
    content: url("/dev/os/assets/images/wiki.imindlabs.logo.png");
}
</style><link rel="stylesheet" href="/dev/os/assets/gitbook/custom-local-child.css">

<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<!-- <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/dev/os/assets/gitbook/images/apple-touch-icon-precomposed-152.png"> -->
<!-- <link rel="shortcut icon" href="/dev/os/wiki.imindlabs.favicon.png" type="image/x-icon"> -->
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/dev/os/wiki.imindlabs.favicon.png">
<link rel="icon" href="/dev/os/wiki.imindlabs.favicon.png" sizes="32x32" type="image/png">
<link rel="icon" href="/dev/os/wiki.imindlabs.favicon.png" sizes="16x16" type="image/png">
<link rel="shortcut icon" href="/dev/os/wiki.imindlabs.favicon.png" type="image/png">



<!-- trackers -->
            <link rel="prev" href="/dev/os/docker/3_docker_1_fundamentals/" />
        

        
            <link rel="next" href="/dev/os/docker/3_docker_3_volume/" />
        
    </head>
    <body>         
        <div class="book"><div class="book-summary">
    <script type="text/javascript">
        // Fixes the page links scroll problem on both desktop and mobile browsers
        function pageScrollToTop(element) {
            // both mobile and non-mobile
            $('div.body-inner').animate({ scrollTop: 0 });
            $(element).parent().find('li>ul>li').removeClass('active');
            return true;  // propagate
        }
        // Fixes the anchor links scroll problem on mobile browsers
        function mobilePageScrollToAnchor(element) {
            $(element).closest('li.chapter').find('ul>li').removeClass('active');
            $(element).parent().addClass('active');
            
            // ! BUG: Enable the following functionality on large screen sizes
            // On sub menu item click the page did not navigate. Now it does.
            //if ($(document).width() <= 1240) {
                $('div.body-inner').animate({ scrollTop: $($(element).attr('href')).get(0).offsetTop });
            // }
            return true;
        }
    </script>

    <!-- <div style="text-align:center;" class="animate__animated animate__pulse animate__delay-1s">
        <a href="/dev/os/">
            <img class="logo zoom" src="/dev/os/assets/images/wiki.imindlabs.logo.png" alt="Intelligent Mind Labs wiki logo" />
        </a>
    </div> -->
    <div style="text-align:center;" class="logo-wrap">
        <a href="/dev/os/">
            <img class="logo zoom" src="/dev/os/assets/images/wiki.imindlabs.logo_153x200.webp" alt="Intelligent Mind Labs wiki logo" width="153" height="200"/>
        </a>
    </div>

    <nav role="navigation">
        <div id="book-search-input" role="search">
            <input type="text" placeholder="Type to search" />
        </div>
        <div id="book-search-input-link" role="search">
            <a href="/dev/os/assets/search.html">Click to Search</a>
        </div>
        <ul class="summary">
            
            <li class="chapter" data-level="1.1" data-path="/dev/os">
                
                <a href="/dev/os/" onclick="pageScrollToTop(this)">
                    Wiki | O/S
                </a>
            </li>

            <!-- <li class="divider"></li> -->

            
            <!-- <p>1_windows</p> -->
            
                <p class="collection-title">Windows</p>
            
            
            

            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/1_windows10/">
                
                <a href="/dev/os/windows/1_windows10/" onclick="pageScrollToTop(this)">
                    1. Windows 10
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/2_windows_server2019/">
                
                <a href="/dev/os/windows/2_windows_server2019/" onclick="pageScrollToTop(this)">
                    2. Windows Server 2019
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/3.1_mingw/">
                
                <a href="/dev/os/windows/3.1_mingw/" onclick="pageScrollToTop(this)">
                    3.1. MinGW
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/3.2_cygwin/">
                
                <a href="/dev/os/windows/3.2_cygwin/" onclick="pageScrollToTop(this)">
                    3.2. Cygwin
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/windows/3_wsl/">
                
                <a href="/dev/os/windows/3_wsl/" onclick="pageScrollToTop(this)">
                    3. Linux for Windows (WSL)
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>2_unix</p> -->
            
                <p class="collection-title">Unix Distribution</p>
            
            
            

            
            
            
            <p class="separator-title">Ubuntu</p>
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/linux/1_ubuntu_1_basics/">
                
                <a href="/dev/os/linux/1_ubuntu_1_basics/" onclick="pageScrollToTop(this)">
                    1. Ubuntu Basics
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/linux/1_ubuntu_2_terminal_server/">
                
                <a href="/dev/os/linux/1_ubuntu_2_terminal_server/" onclick="pageScrollToTop(this)">
                    2. Terminal Server
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/linux/2_kali_linux/">
                
                <a href="/dev/os/linux/2_kali_linux/" onclick="pageScrollToTop(this)">
                    2. Kali Linux
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>3_vmachines</p> -->
            
                <p class="collection-title">Virtual Machines</p>
            
            
            

            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/vmmachine/1_vmworkstation/">
                
                <a href="/dev/os/vmmachine/1_vmworkstation/" onclick="pageScrollToTop(this)">
                    1. VM Workstation
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/vmmachine/2_windows_hyper_v/">
                
                <a href="/dev/os/vmmachine/2_windows_hyper_v/" onclick="pageScrollToTop(this)">
                    2. Windows Hyper-V
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>4_containerization</p> -->
            
                <p class="collection-title">Containerization</p>
            
            
            

            
            
            
            <p class="separator-title">Docker</p>
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_0_images/">
                
                <a href="/dev/os/docker/3_docker_0_images/" onclick="pageScrollToTop(this)">
                    0. Images to Download
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_1_fundamentals/">
                
                <a href="/dev/os/docker/3_docker_1_fundamentals/" onclick="pageScrollToTop(this)">
                    1. Fundamentals
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter active" data-level="1.2" data-path="/dev/os/docker/3_docker_2_workflow/">
                
                <a href="/dev/os/docker/3_docker_2_workflow/" onclick="pageScrollToTop(this)">
                    2. Workflow
                </a>
                
                
                <ul><li><a href="#1-creating-a-docker-container" onclick="mobilePageScrollToAnchor(this)" >1. Creating a Docker Container</a><ul><li><a href="#11-example-running-an-alpine-linux-shell" onclick="mobilePageScrollToAnchor(this)" >1.1 Example: Running an Alpine Linux Shell</a></li><li><a href="#12-additional-tips" onclick="mobilePageScrollToAnchor(this)" >1.2 Additional Tips</a><ul><li><a href="#networking" onclick="mobilePageScrollToAnchor(this)" >Networking</a></li></ul></li><li><a href="#13-dokerize-an-app" onclick="mobilePageScrollToAnchor(this)" >1.3 Dokerize an App</a></li><li><a href="#14-working-with-existing-docker-images" onclick="mobilePageScrollToAnchor(this)" >1.4 Working with Existing Docker images</a><ul><li><a href="#141-creating--running--starting-container" onclick="mobilePageScrollToAnchor(this)" >1.4.1 Creating / Running / Starting Container</a></li><li><a href="#142-exiting-container" onclick="mobilePageScrollToAnchor(this)" >1.4.2 Exiting Container</a></li></ul></li></ul></li><li><a href="#2-docker-with-ubuntu-vs-ubuntu-vm" onclick="mobilePageScrollToAnchor(this)" >2. Docker with Ubuntu vs Ubuntu VM?</a><ul><li><a href="#21-key-concepts-and-technologies" onclick="mobilePageScrollToAnchor(this)" >2.1 Key Concepts and Technologies</a></li><li><a href="#22-example-of-how-an-ubuntu-image-works-in-docker" onclick="mobilePageScrollToAnchor(this)" >2.2 Example of How an Ubuntu Image Works in Docker</a></li></ul></li><li><a href="#3-docker-basics" onclick="mobilePageScrollToAnchor(this)" >3. Docker Basics</a><ul><li><a href="#31-docker-crash-course" onclick="mobilePageScrollToAnchor(this)" >3.1 Docker Crash Course</a></li><li><a href="#33-docker-advance" onclick="mobilePageScrollToAnchor(this)" >3.3 Docker Advance</a></li></ul></li><li><a href="#docker-basic-commands" onclick="mobilePageScrollToAnchor(this)" >Docker Basic Commands</a><ul><li><a href="#0-docker-related" onclick="mobilePageScrollToAnchor(this)" >0. Docker Related</a></li><li><a href="#1-docker-run--dit-flag" onclick="mobilePageScrollToAnchor(this)" >1. Docker run <code class="language-plaintext highlighter-rouge">-dit</code> flag</a><ul><li><a href="#why-use--dit-together" onclick="mobilePageScrollToAnchor(this)" >Why Use <code class="language-plaintext highlighter-rouge">-dit</code> Together?</a></li><li><a href="#example-scenario" onclick="mobilePageScrollToAnchor(this)" >Example Scenario</a></li><li><a href="#important-example" onclick="mobilePageScrollToAnchor(this)" >Important Example</a></li></ul></li><li><a href="#3-docker-commit" onclick="mobilePageScrollToAnchor(this)" >3. Docker commit</a><ul><li><a href="#31-docker-commit-vs-dockerfiles" onclick="mobilePageScrollToAnchor(this)" >3.1 Docker commit vs dockerfiles</a></li></ul></li><li><a href="#4-docker-inspect" onclick="mobilePageScrollToAnchor(this)" >4. Docker inspect</a><ul><li><a href="#inspecting-a-docker-image" onclick="mobilePageScrollToAnchor(this)" >Inspecting a Docker Image:</a></li><li><a href="#example-1" onclick="mobilePageScrollToAnchor(this)" >Example:</a></li><li><a href="#inspecting-a-container" onclick="mobilePageScrollToAnchor(this)" >Inspecting a Container:</a></li><li><a href="#example-2" onclick="mobilePageScrollToAnchor(this)" >Example:</a></li></ul></li><li><a href="#5-docker-history" onclick="mobilePageScrollToAnchor(this)" >5. Docker history</a><ul><li><a href="#viewing-the-layers-image-history" onclick="mobilePageScrollToAnchor(this)" >Viewing the Layers (Image History):</a></li><li><a href="#example-3" onclick="mobilePageScrollToAnchor(this)" >Example:</a></li></ul></li></ul></li><li><a href="#todo-in-progress" onclick="mobilePageScrollToAnchor(this)" >TODO: In progress</a></li></ul>

                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_3_volume/">
                
                <a href="/dev/os/docker/3_docker_3_volume/" onclick="pageScrollToTop(this)">
                    3. Volumes
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_4_networking/">
                
                <a href="/dev/os/docker/3_docker_4_networking/" onclick="pageScrollToTop(this)">
                    4. Networking
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_5_compose/">
                
                <a href="/dev/os/docker/3_docker_5_compose/" onclick="pageScrollToTop(this)">
                    5. Docker Compose
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_6_container_monitoring/">
                
                <a href="/dev/os/docker/3_docker_6_container_monitoring/" onclick="pageScrollToTop(this)">
                    6. Container Monitoring
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_docker_7_misc/">
                
                <a href="/dev/os/docker/3_docker_7_misc/" onclick="pageScrollToTop(this)">
                    7. Docker Misc
                </a>
                
                
                
            </li>
            
            
            
            <p class="separator-title">Kubernetes</p>
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_1_fundamentals/">
                
                <a href="/dev/os/docker/3_kube_1_fundamentals/" onclick="pageScrollToTop(this)">
                    1. Fundamentals
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_2_kubectl/">
                
                <a href="/dev/os/docker/3_kube_2_kubectl/" onclick="pageScrollToTop(this)">
                    2. kubectl
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_3_deployments/">
                
                <a href="/dev/os/docker/3_kube_3_deployments/" onclick="pageScrollToTop(this)">
                    3. Deployments
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_4_services/">
                
                <a href="/dev/os/docker/3_kube_4_services/" onclick="pageScrollToTop(this)">
                    3. Deployments
                </a>
                
                
                
            </li>
            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/docker/3_kube_5_config_secret/">
                
                <a href="/dev/os/docker/3_kube_5_config_secret/" onclick="pageScrollToTop(this)">
                    3. Config and Secret Management
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>5_iotplatforms</p> -->
            
                <p class="collection-title">IoT Platform</p>
            
            
            

            
            
            
            
            
            <li class="chapter" data-level="1.1" data-path="/dev/os/iotplatform/1_tensorboard/">
                
                <a href="/dev/os/iotplatform/1_tensorboard/" onclick="pageScrollToTop(this)">
                    1. Home Assistant
                </a>
                
                
                
            </li>
            

            
            <!-- <li class="divider"></li> -->
            
            
            
            <!-- <p>posts</p> -->
            
            
            

            

            
            
            
        </ul>
    </nav>
</div><div class="book-body">
                <div class="book-header" role="navigation">
                    <!-- Title -->
                    <h1>
                        <i class="fa fa-circle-o-notch fa-spin"></i>
                        
                            <a href="." >2. Workflow</a>
                        
                    </h1>
                </div>

                <div class="body-inner"><div class="page-wrapper" tabindex="-1" role="main">
    

    <!-- <div class="spinner-container">
        <div class="spinner-border text-info" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div> -->

    <div class="page-inner">
        <div id="book-search-results"> <!-- class="hide_element" -->            
            <div class="search-noresults">
                <section class="normal markdown-section">
                    
                        <h1 id="/docker/3_docker_2_workflow">2. Workflow</h1>
                    

                    <h1 id="1-creating-a-docker-container">1. Creating a Docker Container</h1>

<p>Creating a Docker container that runs a Unix shell is straightforward and a common use case. Docker containers can run any process, including a shell, provided that the necessary binaries and libraries are included in the container image. Here’s a step-by-step guide on how to create and run a Docker container with a Unix shell:</p>

<h4 id="step-1-install-docker">Step 1: Install Docker</h4>

<p>Ensure Docker is installed on your system. You can download and install Docker from the <a href="https://www.docker.com/get-started">official Docker website</a>.</p>

<h4 id="step-2-choose-a-base-image">Step 2: Choose a Base Image</h4>

<p>Docker images are built from base images, which can include various Linux distributions. Common choices for Unix shell environments include:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">alpine</code>: A minimal Docker image based on Alpine Linux.</li>
  <li><code class="language-plaintext highlighter-rouge">ubuntu</code>: A more full-featured Docker image based on Ubuntu.</li>
</ul>

<h4 id="step-3-create-a-dockerfile">Step 3: Create a Dockerfile</h4>

<p>A Dockerfile is a script that contains instructions on how to build a Docker image. Below are examples of Dockerfiles for both Alpine Linux and Ubuntu:</p>

<h5 id="dockerfile-for-alpine-linux">Dockerfile for Alpine Linux</h5>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Use the official Alpine Linux image</span>
<span class="k">FROM</span><span class="s"> alpine:latest</span>

<span class="c"># Install Bash shell</span>
<span class="k">RUN </span>apk add <span class="nt">--no-cache</span> bash

<span class="c"># Set the default command to run Bash</span>
<span class="k">CMD</span><span class="s"> ["bash"]</span>
</code></pre></div></div>

<h5 id="dockerfile-for-ubuntu">Dockerfile for Ubuntu</h5>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Use the official Ubuntu image</span>
<span class="k">FROM</span><span class="s"> ubuntu:latest</span>

<span class="c"># Install Bash shell</span>
<span class="k">RUN </span>apt-get update <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> bash

<span class="c"># Set the default command to run Bash</span>
<span class="k">CMD</span><span class="s"> ["bash"]</span>
</code></pre></div></div>

<h4 id="step-4-build-the-docker-image">Step 4: Build the Docker Image</h4>

<p>Navigate to the directory containing your Dockerfile and build the Docker image using the <code class="language-plaintext highlighter-rouge">docker build</code> command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># For Alpine Linux</span>
docker build <span class="nt">-t</span> alpine-bash <span class="nb">.</span>

<span class="c"># For Ubuntu</span>
docker build <span class="nt">-t</span> ubuntu-bash <span class="nb">.</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">-t</code> flag tags the image with a name (<code class="language-plaintext highlighter-rouge">alpine-bash</code> or <code class="language-plaintext highlighter-rouge">ubuntu-bash</code>).</p>

<h4 id="step-5-run-the-docker-container">Step 5: Run the Docker Container</h4>

<p>Once the image is built, you can run a container from the image using the <code class="language-plaintext highlighter-rouge">docker run</code> command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># For Alpine Linux</span>
docker run <span class="nt">-it</span> alpine-bash

<span class="c"># For Ubuntu</span>
docker run <span class="nt">-it</span> ubuntu-bash
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">-it</code> flags make the container interactive and allocate a pseudo-TTY, allowing you to interact with the shell.</p>

<h2 id="11-example-running-an-alpine-linux-shell">1.1 Example: Running an Alpine Linux Shell</h2>

<p>Here’s a complete example of creating and running an Alpine Linux shell in a Docker container:</p>

<ol>
  <li>
    <p>Create a directory and a Dockerfile:</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>alpine-shell
<span class="nb">cd </span>alpine-shell
nano Dockerfile
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add the following content to the Dockerfile:</p>

    <div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> alpine:latest</span>
<span class="k">RUN </span>apk add <span class="nt">--no-cache</span> bash
<span class="k">CMD</span><span class="s"> ["bash"]</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Build the Docker image:</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">-t</span> alpine-bash <span class="nb">.</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Run the Docker container:</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> alpine-bash
</code></pre></div>    </div>
  </li>
</ol>

<blockquote class="block-tip">
  <h5 id="tip">TIP</h5>
  <p>When starting the container, it will run the startup command ‘bash’ as specified in the docker file above!</p>
</blockquote>

<p>You will now be inside a Bash shell running in an Alpine Linux container.</p>

<p>Some of linux commands to observe what’s going on inside the container.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@&lt;container-id&gt;# <span class="nb">ls</span> <span class="nt">-al</span> <span class="o">(</span>observe the file system<span class="o">)</span>
root@&lt;container-id&gt;# ps <span class="nt">-elf</span> <span class="o">(</span>running processes<span class="o">)</span>
</code></pre></div></div>
<p>If one explores the filesystem, there are no other shell or GUI in 
the file system (docker container linux is <strong>lightweight unlike VM</strong>).</p>

<p>The bash process is the main process with PID=1.</p>

<blockquote class="block-tip">
  <h5 id="important">IMPORTANT</h5>

  <p>Docker makes it easy to package and distribute environments, including Unix shells, ensuring consistency and isolation from the host system.</p>
</blockquote>

<h2 id="12-additional-tips">1.2 Additional Tips</h2>

<h3 id="networking">Networking</h3>
<p>You can connect the container to a network using the <code class="language-plaintext highlighter-rouge">--network</code> flag:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> <span class="nt">--network</span><span class="o">=</span>my-network alpine-bash
</code></pre></div></div>

<blockquote class="block-tip">
  <h5 id="tip-1">TIP</h5>

  <p>Docker makes it easy to package and distribute environments, including Unix shells, ensuring consistency and isolation from the host system.</p>
</blockquote>

<h2 id="13-dokerize-an-app">1.3 Dokerize an App</h2>

<p>A guide to put your application to docker and distribute.</p>

<style>  

  #vid_docker_intermediate.flex-container {
      display: flex;
      flex-direction: row;
  }
  #vid_docker_intermediate.flex-container > div {
    width: 100%;
    height: 440px;
    margin: auto;
    padding: 5px;
    margin-bottom: 10px;
  }

  

  
  /* Responsive layout - makes a one column layout instead of a two-column layout */
  @media (max-width: 800px) {

    #vid_docker_intermediate.flex-container {
      flex-direction: column;
    }
    #vid_docker_intermediate.flex-container > div {
      width: 100%;
      height: 250px;
    }
  }
</style>

<div id="vid_docker_intermediate" class="flex-container">
  
  <div><iframe style="border-radius: 10px; overflow: hidden; border: 2px solid #7a7a7a; box-shadow: 1px 2px 5px #b4b4b4;" width="100%" height="100%" src="https://www.youtube.com/embed/gAkwW2tuIqE" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe></div>
  
</div>

<h2 id="14-working-with-existing-docker-images">1.4 Working with Existing Docker images</h2>

<h3 id="141-creating--running--starting-container">1.4.1 Creating / Running / Starting Container</h3>

<p>Docker hub provides docker images to start with.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ubuntu  <span class="c"># download the Ubuntu image</span>

docker run <span class="nt">-it</span> ubuntu 
<span class="c"># The command `run`</span>
<span class="c"># 1. creates a container with a random name</span>
<span class="c"># 2. starts the Ubuntu container with the default startup command specified in docker file (i.e bash)</span>

<span class="c">#- `-i`: Keeps STDIN open even if not attached.</span>
<span class="c">#- `-t`: Allocates a pseudo-TTY, which allows you to interact with the container.</span>
</code></pre></div></div>

<p>can run a custom startup command when running a container.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> ubuntu sh 
<span class="c"># run Ubuntu container with a custom startup command that you want to run inside the container (i.e `sh`)</span>

docker run <span class="nt">-it</span> ubuntu top <span class="nt">-b</span>
<span class="c"># The command that you want to run inside the container here is `top -b`</span>

docker run <span class="nt">-it</span> alpine-bash sh <span class="nt">-c</span> <span class="s2">"echo 'Hello, World!'"</span>
<span class="c"># You can override the default command to run custom scripts or commands</span>
<span class="c"># Here, run the `echo` shell command inside a shell process </span>
</code></pre></div></div>

<h4 id="start-an-existing-container">Start an existing container</h4>
<p>If you want to start an already existing container in interactive mode, you can use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start <span class="nt">-i</span> &lt;container_name_or_id&gt;
</code></pre></div></div>

<p>This will attach to the container and allow you to interact with it.</p>

<blockquote class="block-tip">
  <h5 id="important-1">IMPORTANT</h5>

  <p>Cannot run a command (like in <code class="language-plaintext highlighter-rouge">run ... &lt;command to run inside container&gt;</code>) when starting a container</p>
</blockquote>

<p><strong>Start an existing container in detach mode</strong></p>

<p>To start an existing Docker container in detached mode:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start &lt;container_name_or_id&gt;
</code></pre></div></div>

<p>By default, Docker containers will run in the background unless they are designed to be interactive (e.g., by running a shell). If you want to reattach or interact with the running container, you can use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker attach &lt;container_name_or_id&gt;
<span class="c"># This will attach you to the PID=1 main process</span>
</code></pre></div></div>

<h4 id="run-a-command-in-a-running-container">Run a command in a running container</h4>

<p>The <code class="language-plaintext highlighter-rouge">docker exec -it</code> command is used to run a command in a running Docker container interactively. This is often used to open a <strong>new shell</strong> session inside a container that is already running. To start a bash session inside a <strong>running</strong> container:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">exec</span> <span class="nt">-it</span> &lt;container_name_or_id&gt; /bin/bash
<span class="c"># Creates a new shell with bash and attach a pseudo terminal in the interactive mode</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">docker exec</code>: This part of the command is used to execute a command inside a running container.</li>
  <li><code class="language-plaintext highlighter-rouge">-i</code>: This flag keeps STDIN open, allowing you to interact with the container.</li>
  <li><code class="language-plaintext highlighter-rouge">-t</code>: This flag allocates a pseudo-TTY, which makes the command interactive (usually used for commands like <code class="language-plaintext highlighter-rouge">/bin/bash</code> or <code class="language-plaintext highlighter-rouge">/bin/sh</code>).</li>
</ul>

<blockquote class="block-tip">
  <h5 id="important-2">IMPORTANT</h5>

  <p>This command is useful when you need to inspect the container, troubleshoot, or manually run commands inside it.</p>
</blockquote>

<h4 id="enter-into-a-running-container">Enter into a running container</h4>

<p>You can enter a running container with:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">exec</span> <span class="nt">-it</span> my_new_container /bin/bash
</code></pre></div></div>
<p>you can replace bash with sh if bash is not available in the container.</p>

<p>To attach to a running container later, use -a / –attach option:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start <span class="nt">-a</span> my_new_container
</code></pre></div></div>

<p>If you need to explicitly use a UID , like root = UID 0, you can specify this:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">exec</span> <span class="nt">-it</span> <span class="nt">-u</span> 0 my_new_container /bin/bash
<span class="c"># will log you as root</span>
</code></pre></div></div>

<h3 id="142-exiting-container">1.4.2 Exiting Container</h3>

<p>Lets run a container</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> ubuntu bash
</code></pre></div></div>

<h5 id="exit-without-stopping-the-container">Exit without Stopping the container</h5>

<p>To exit the bash shell in the container one can, use the <code class="language-plaintext highlighter-rouge">Ctrl+PQ</code> option which will return the host system prompt but keeps the container running in the background.</p>

<p>This operation detaches the container and allows you to return to your system’s shell without exiting from the only  process (i.e <code class="language-plaintext highlighter-rouge">bash</code>) which is running inside the container. Hence the container will stay Running.</p>

<h5 id="alternative">Alternative</h5>
<p>Once inside the container, if you exit from the only process running inside the container (in this example, <code class="language-plaintext highlighter-rouge">bash</code> process), it will return to your system’s shell, and the <strong>container will be stopped</strong>.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@container_id# <span class="nb">exit</span>
</code></pre></div></div>

<blockquote class="block-tip">
  <h5 id="important-3">IMPORTANT</h5>
  <p>A container must have a running process to stay alive! A container cannot exist if the main process is terminated.</p>
</blockquote>

<h1 id="2-docker-with-ubuntu-vs-ubuntu-vm">2. Docker with Ubuntu vs Ubuntu VM?</h1>

<p>Docker provides the functionality of different operating systems, like Ubuntu, without running a full guest OS by leveraging a few key concepts and technologies. Here’s how Docker manages to provide the same functionalities using an Ubuntu image without installing the entire Ubuntu operating system:</p>

<h2 id="21-key-concepts-and-technologies">2.1 Key Concepts and Technologies</h2>

<h5 id="containers-vs-virtual-machines">Containers vs. Virtual Machines:</h5>
<ul>
  <li><strong>Virtual Machines (VMs):</strong> Each VM includes a full operating system along with the application and its dependencies, running on a hypervisor. This means each VM has its own kernel and OS resources.</li>
  <li><strong>Containers:</strong> Containers, on the other hand, share the host system’s kernel and only include the application and its dependencies. Containers run as isolated processes on the host OS, using its kernel but maintaining their own filesystem, network, and process space.</li>
</ul>

<h5 id="union-file-systems-and-docker-layers">Union File Systems and Docker Layers:</h5>
<ul>
  <li>Docker images are built in layers. Each instruction in a Dockerfile creates a new layer. These layers are stacked and form a union filesystem, which means that the image only contains the necessary parts of the OS to run the application.</li>
  <li>For an Ubuntu image, this includes the necessary binaries, libraries, and tools that are part of the Ubuntu userland, but not the kernel.</li>
</ul>

<h5 id="namespaces-and-cgroups">Namespaces and Cgroups:</h5>
<ul>
  <li><strong>Namespaces:</strong> Provide isolated environments within the same OS instance. This includes process isolation (PID namespace), user isolation (user namespace), file system isolation (mount namespace), etc.</li>
  <li><strong>Control Groups (Cgroups):</strong> Manage and limit resource usage (CPU, memory, disk I/O, etc.) of the containerized applications.</li>
</ul>

<h5 id="docker-images">Docker Images:</h5>
<ul>
  <li>When you pull an Ubuntu Docker image from Docker Hub, it includes the Ubuntu filesystem (binaries, libraries, etc.) but without the Ubuntu kernel. It relies on the host’s kernel to function.</li>
  <li>This means the image has everything needed to provide the “Ubuntu experience” (such as the apt package manager, bash shell, common utilities, etc.) without the overhead of a full OS.</li>
</ul>

<h2 id="22-example-of-how-an-ubuntu-image-works-in-docker">2.2 Example of How an Ubuntu Image Works in Docker</h2>

<p>When you run an Ubuntu container, Docker uses the host OS kernel and provides the container with the Ubuntu filesystem:</p>

<ol>
  <li><strong>Download the Ubuntu Image:</strong>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ubuntu
</code></pre></div>    </div>
  </li>
  <li><strong>Run the Ubuntu Container:</strong>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> ubuntu
</code></pre></div>    </div>
  </li>
</ol>

<p>Inside the container, you can run commands just like you would on a full Ubuntu system:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@container_id:/# <span class="nb">ls
</span>bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
</code></pre></div></div>

<p>You can use <code class="language-plaintext highlighter-rouge">apt-get</code> to install software, navigate the filesystem, and perform other tasks as if you were on an Ubuntu machine.</p>

<h4 id="how-docker-achieves-this">How Docker Achieves This</h4>

<ol>
  <li><strong>File System:</strong>
    <ul>
      <li>The Ubuntu Docker image contains a minimal root filesystem that replicates the Ubuntu environment. This includes directories like <code class="language-plaintext highlighter-rouge">/bin</code>, <code class="language-plaintext highlighter-rouge">/etc</code>, <code class="language-plaintext highlighter-rouge">/lib</code>, <code class="language-plaintext highlighter-rouge">/usr</code>, etc., filled with the usual tools and libraries.</li>
    </ul>
  </li>
  <li><strong>Process Management:</strong>
    <ul>
      <li>Docker containers run as isolated processes on the host system. The host’s kernel manages these processes, providing the necessary system calls and resource management.</li>
    </ul>
  </li>
  <li><strong>User Space Tools:</strong>
    <ul>
      <li>The tools and applications you use within the container are from the Ubuntu user space. These tools are packaged in the Docker image, enabling you to interact with the container as if it were a standalone Ubuntu system.</li>
    </ul>
  </li>
</ol>

<blockquote class="block-tip">
  <h5 id="important-4">IMPORTANT</h5>

  <p>Docker containers simulate a full OS environment by packaging the userland components (binaries, libraries, tools) of that OS while relying on the host’s kernel. This approach allows Docker to provide lightweight, efficient, and isolated environments that mimic the functionalities of a complete OS without the overhead of a full VM.</p>
</blockquote>

<h1 id="3-docker-basics">3. Docker Basics</h1>

<h2 id="31-docker-crash-course">3.1 Docker Crash Course</h2>

<style>  

  #vid_docker_crashcourse.flex-container {
      display: flex;
      flex-direction: row;
  }
  #vid_docker_crashcourse.flex-container > div {
    width: 100%;
    height: 440px;
    margin: auto;
    padding: 5px;
    margin-bottom: 10px;
  }

  

  
  /* Responsive layout - makes a one column layout instead of a two-column layout */
  @media (max-width: 800px) {

    #vid_docker_crashcourse.flex-container {
      flex-direction: column;
    }
    #vid_docker_crashcourse.flex-container > div {
      width: 100%;
      height: 250px;
    }
  }
</style>

<div id="vid_docker_crashcourse" class="flex-container">
  
  <div><iframe style="border-radius: 10px; overflow: hidden; border: 2px solid #7a7a7a; box-shadow: 1px 2px 5px #b4b4b4;" width="100%" height="100%" src="https://www.youtube.com/embed/31ieHmcTUOk?list=PL4cUxeGkcC9hxjeEtdHFNYMtCpjNBm3h7" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe></div>
  
</div>

<h4 id="pulled-docker-images-are-stored-in">Pulled docker images are stored in?</h4>

<p>Here is a list of the storage locations of the docker images on different operating systems:</p>
<ul>
  <li>Ubuntu: /var/lib/docker/</li>
  <li>Fedora: /var/lib/docker/</li>
  <li>Debian: /var/lib/docker/</li>
  <li>Windows: C:\ProgramData\DockerDesktop.</li>
  <li>MacOS: ~/Library/Containers/com. docker. docker/Data/vms/0/</li>
</ul>

<h2 id="33-docker-advance">3.3 Docker Advance</h2>

<h1 id="docker-basic-commands">Docker Basic Commands</h1>

<h2 id="0-docker-related">0. Docker Related</h2>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">docker ps</code></p>

    <p>running containers</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">docker run –name debian-container-always -it –restart always debian:latest</code></p>

    <p>container restarts automatically if stopped due to <code class="language-plaintext highlighter-rouge">exit</code> from the main process.</p>
  </li>
</ol>

<p>To end the session, clean up all the containers and images.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker container <span class="nb">rm</span> <span class="nt">-f</span> <span class="o">(</span><span class="nb">sudo </span>docker ps <span class="nt">-aq</span><span class="o">)</span>
docker image rmi <span class="nt">-f</span> <span class="si">$(</span><span class="nb">sudo </span>docker images – aq<span class="si">)</span>
</code></pre></div></div>

<h2 id="1-docker-run--dit-flag">1. Docker run <code class="language-plaintext highlighter-rouge">-dit</code> flag</h2>

<p>In Docker, the <code class="language-plaintext highlighter-rouge">-dit</code> flags are used in combination to run a container in the background (detached mode), while still providing interactive terminal capabilities and allocating a pseudo-TTY. Let’s break down the purpose of each flag and why they might be used together:</p>

<p><strong>1. <code class="language-plaintext highlighter-rouge">-d</code> (detached mode)</strong>:</p>

<p>This flag runs the container in the background, returning control of the terminal to the user. The container continues to run even after the user logs out or closes the terminal session.</p>

<p><strong>2. <code class="language-plaintext highlighter-rouge">-i</code> (interactive mode)</strong>:</p>

<p>This flag keeps the STDIN stream open, allowing the user to provide input to the container interactively. It is useful for cases where the container process requires user input or when running a process that reads from the terminal.</p>

<p><strong>3. <code class="language-plaintext highlighter-rouge">-t</code> (pseudo-TTY)</strong>:</p>

<p>This flag allocates a pseudo-TTY, which provides an interface for terminal input and output. It makes the command prompt more user-friendly, with features like line editing.</p>

<h3 id="why-use--dit-together">Why Use <code class="language-plaintext highlighter-rouge">-dit</code> Together?</h3>

<p>While it may seem counterintuitive to use <code class="language-plaintext highlighter-rouge">-d</code> (detached mode) and <code class="language-plaintext highlighter-rouge">-it</code> (interactive and TTY) together, there are specific scenarios where this combination is useful:</p>

<p><strong>1. Starting Interactive Services in the Background</strong>:</p>

<p>Sometimes, you want to start a service or an interactive application (like a shell or a REPL) in the background, but still be able to attach to it later if needed. For example, running a debugging tool or an interactive shell session in a container that you can later attach to using <code class="language-plaintext highlighter-rouge">docker attach</code> or <code class="language-plaintext highlighter-rouge">docker exec</code>.</p>

<p><strong>2. Log and Debug</strong>:</p>

<p>By using <code class="language-plaintext highlighter-rouge">-it</code>, you can ensure that the container has a proper terminal interface, which can be useful for logging and debugging. Even if the container is running in detached mode (<code class="language-plaintext highlighter-rouge">-d</code>), you can inspect logs or attach to the container to interact with it.</p>

<p><strong>3. Daemon Processes with Interactive Control</strong>:</p>

<p>Some daemon processes may provide an interactive control interface that can be accessed through a TTY. By using <code class="language-plaintext highlighter-rouge">-dit</code>, the container runs in the background, but you can still interact with the daemon if necessary.</p>

<h3 id="example-scenario">Example Scenario</h3>

<p>Suppose you’re running a container with a shell that needs to start and continue running in the background, but you also want the ability to interact with it later:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-dit</span> <span class="nt">--name</span> my-shell-container ubuntu bash
</code></pre></div></div>

<p>In this case:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">-d</code> allows the container to run in the background.</li>
  <li><code class="language-plaintext highlighter-rouge">-i</code> keeps the input open, which is necessary for interactive shells.</li>
  <li><code class="language-plaintext highlighter-rouge">-t</code> provides a terminal interface, making the shell prompt user-friendly.</li>
</ul>

<p>You can later attach to this container using <code class="language-plaintext highlighter-rouge">docker attach my-shell-container</code> or execute a command interactively using <code class="language-plaintext highlighter-rouge">docker exec -it my-shell-container bash</code>.</p>

<blockquote class="block-tip">
  <h5 id="important-5">IMPORTANT</h5>

  <p>Using <code class="language-plaintext highlighter-rouge">-dit</code> is not a common scenario, but it offers flexibility when you want a containerized process to run in the background while retaining interactive capabilities.</p>
</blockquote>

<h3 id="important-example">Important Example</h3>

<p>Following docker container will immediately stop as soon it is started. You will not be able to <code class="language-plaintext highlighter-rouge">attach</code> or <code class="language-plaintext highlighter-rouge">exec</code> any command on the container again.</p>
<ul>
  <li>To attach, you need to have a interactive pseudo terminal created initianlly when you create a container</li>
  <li>To exec, you need a running container</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--name</span> stranded_container ubuntu

<span class="c"># or </span>

docker run <span class="nt">--name</span> stranded_container ubuntu bash

<span class="c"># Creating a container without a interactive peusdo terminal (-it). </span>
<span class="c"># `bash` process will simply run in ubuntu and exit as soon as the container starts. Therefore resulting in stopping the container.</span>
</code></pre></div></div>

<h2 id="3-docker-commit">3. Docker commit</h2>

<p>The <code class="language-plaintext highlighter-rouge">docker commit</code> command is used to create a new Docker image from an existing container. This allows you to capture the current state of a container, including any changes made to it, and save it as a new image that can be used to create other containers.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker commit <span class="o">[</span>OPTIONS] &lt;container_id_or_name&gt; &lt;new_image_name&gt;
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;container_id_or_name&gt;</code>: The ID or name of the container you want to commit.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;new_image_name&gt;</code>: The name you want to give to the new image.</li>
</ul>

<h4 id="common-options">Common Options:</h4>
<ul>
  <li><code class="language-plaintext highlighter-rouge">-m "message"</code>: Adds a commit message, similar to a Git commit message, describing what changes were made.</li>
  <li><code class="language-plaintext highlighter-rouge">-a "author"</code>: Specifies the author of the image (e.g., <code class="language-plaintext highlighter-rouge">-a "John Doe"</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">-p</code>: Pauses the container during the commit to ensure that the filesystem is in a consistent state.</li>
</ul>

<h4 id="example">Example:</h4>
<p>Assume you have a running container with ID <code class="language-plaintext highlighter-rouge">abc123</code> that you’ve made changes to, and you want to save those changes as a new image called <code class="language-plaintext highlighter-rouge">my_custom_httpd</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker commit <span class="nt">-m</span> <span class="s2">"Customized Apache HTTPD configuration"</span> <span class="nt">-a</span> <span class="s2">"John Doe"</span> abc123 my_custom_httpd
</code></pre></div></div>

<p>This command will create a new image named <code class="language-plaintext highlighter-rouge">my_custom_httpd</code> based on the current state of the <code class="language-plaintext highlighter-rouge">abc123</code> container. You can then use this image to run new containers with the changes preserved.</p>

<h4 id="verifying-the-new-image">Verifying the New Image:</h4>
<p>To verify that the new image has been created, you can list your Docker images:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker images
</code></pre></div></div>

<p>You should see <code class="language-plaintext highlighter-rouge">my_custom_httpd</code> in the list of available images.</p>

<h3 id="31-docker-commit-vs-dockerfiles">3.1 Docker commit vs dockerfiles</h3>

<p><code class="language-plaintext highlighter-rouge">docker commit</code> and Dockerfiles serve different purposes in Docker workflows, and each has its own advantages and use cases. Here’s a comparison of the advantages of using <code class="language-plaintext highlighter-rouge">docker commit</code> versus Dockerfiles:</p>

<h4 id="advantages-of-docker-commit">Advantages of <code class="language-plaintext highlighter-rouge">docker commit</code></h4>

<p><strong>1. Quick Prototyping and Experimentation:</strong></p>
<ul>
  <li><strong>Immediate Changes:</strong> <code class="language-plaintext highlighter-rouge">docker commit</code> allows you to quickly capture the current state of a running container, including changes made interactively (e.g., installing packages, modifying files). This can be useful for rapid prototyping or experimentation without needing to create a Dockerfile.</li>
  <li><strong>Ease of Use:</strong> For developers who are experimenting with a new setup or configuration, <code class="language-plaintext highlighter-rouge">docker commit</code> can be a fast way to save the state of a container without writing a Dockerfile.</li>
</ul>

<p><strong>2. Snapshot of Current Container State:</strong></p>
<ul>
  <li><strong>Capture Complex States:</strong> It’s useful when you have manually configured a container in ways that are hard to describe in a Dockerfile, such as complex runtime configurations or custom setup scripts.</li>
  <li><strong>Preserve Manual Changes:</strong> If you’ve made manual changes inside a container (e.g., modifications to files or configurations) and want to save those changes as an image, <code class="language-plaintext highlighter-rouge">docker commit</code> captures those changes.</li>
</ul>

<p><strong>3. No Need for Dockerfile Syntax Knowledge:</strong></p>
<ul>
  <li><strong>Simplicity for Non-Developers:</strong> Users who are not familiar with Dockerfile syntax or who prefer not to write Dockerfiles can use <code class="language-plaintext highlighter-rouge">docker commit</code> to create images from their containers without needing to learn Dockerfile commands.</li>
</ul>

<h4 id="advantages-of-dockerfiles">Advantages of Dockerfiles</h4>

<p><strong>1. Reproducibility:</strong></p>
<ul>
  <li><strong>Consistent Builds:</strong> Dockerfiles provide a clear and repeatable method to build Docker images. This ensures that anyone building the image from the Dockerfile will get the same result, which is crucial for debugging and maintaining consistency across different environments.</li>
  <li><strong>Version Control:</strong> Dockerfiles can be stored in version control systems (e.g., Git), allowing you to track changes over time and collaborate with others.</li>
</ul>

<p><strong>2. Documentation:</strong></p>
<ul>
  <li><strong>Readable and Maintainable:</strong> Dockerfiles serve as documentation of how an image is built. They provide a human-readable and maintainable record of the installation and configuration steps.</li>
  <li><strong>Best Practices:</strong> Dockerfiles encourage best practices by using well-defined instructions and following conventions that ensure better image layering and efficiency.</li>
</ul>

<p><strong>3. Automation and CI/CD Integration:</strong></p>
<ul>
  <li><strong>Automated Builds:</strong> Dockerfiles can be used in continuous integration and deployment pipelines to automate image builds and deployments.</li>
  <li><strong>Consistent Environments:</strong> Automated builds using Dockerfiles help maintain consistent environments across development, staging, and production.</li>
</ul>

<p><strong>4. Flexibility and Control:</strong></p>
<ul>
  <li><strong>Custom Builds:</strong> Dockerfiles offer fine-grained control over the build process, allowing for optimization and customization that <code class="language-plaintext highlighter-rouge">docker commit</code> cannot provide.</li>
  <li><strong>Complex Configurations:</strong> They enable the creation of complex images with multi-stage builds, conditional logic, and advanced configuration that <code class="language-plaintext highlighter-rouge">docker commit</code> does not support.</li>
</ul>

<h4 id="in-summary">In Summary</h4>

<ul>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">docker commit</code></strong> when you need a quick snapshot of a running container’s state or when you are making interactive changes and need to preserve them without initially defining a Dockerfile.</li>
  <li><strong>Use Dockerfiles</strong> for reproducibility, automation, documentation, and when you require a structured, maintainable way to build Docker images.</li>
</ul>

<blockquote class="block-tip">
  <h5 id="important-6">IMPORTANT</h5>

  <p>In most production scenarios, Dockerfiles are preferred due to their reproducibility and automation capabilities, while <code class="language-plaintext highlighter-rouge">docker commit</code> is more suited for ad-hoc tasks and experimentation.</p>
</blockquote>

<h2 id="4-docker-inspect">4. Docker inspect</h2>

<p>The <code class="language-plaintext highlighter-rouge">docker inspect</code> command is used to obtain detailed information about Docker objects, such as containers, images, networks, or volumes. However, <code class="language-plaintext highlighter-rouge">docker inspect</code> doesn’t directly show the commit history of a Docker image or container in the way that, for example, Git shows commit history.</p>

<h3 id="inspecting-a-docker-image">Inspecting a Docker Image:</h3>
<p>If you want to see detailed information about a Docker image, including its layers and configuration, you can use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect &lt;image_name_or_id&gt;
</code></pre></div></div>

<p>This command will display a JSON-formatted output with various details, such as the image’s ID, creation date, environment variables, command history, and more.</p>

<h3 id="example-1">Example:</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect my_custom_httpd
</code></pre></div></div>

<h3 id="inspecting-a-container">Inspecting a Container:</h3>
<p>Similarly, to inspect a container, you can run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect &lt;container_name_or_id&gt;
</code></pre></div></div>

<h3 id="example-2">Example:</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect my_running_container
</code></pre></div></div>

<h2 id="5-docker-history">5. Docker history</h2>

<h3 id="viewing-the-layers-image-history">Viewing the Layers (Image History):</h3>
<p>If you want to see the layer-by-layer history of an image (which can give you insight into changes made via commits), you can use the <code class="language-plaintext highlighter-rouge">docker history</code> command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">history</span> &lt;image_name_or_id&gt;
</code></pre></div></div>

<p>This command shows a list of layers, including the command that created each layer, the size of each layer, and when it was created.</p>

<h3 id="example-3">Example:</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">history </span>my_custom_httpd
</code></pre></div></div>
<p>The output will show each layer of the image, which can help you understand what commands were run and what changes were made over time. However, it won’t show detailed commit messages like a version control system.</p>

<p>To summarize, while <code class="language-plaintext highlighter-rouge">docker inspect</code> is useful for viewing detailed metadata and configuration, <code class="language-plaintext highlighter-rouge">docker history</code> is the command you would use to inspect the “commits” or layers that make up a Docker image.</p>

<h1 id="todo-in-progress">TODO: In progress</h1>

<h4 id="redis-with-docker">Redis with Docker</h4>

<p>https://www.docker.com/blog/how-to-use-the-redis-docker-official-image/</p>

<h4 id="docker-compose">Docker Compose</h4>

<p>https://youtu.be/DM65_JyGxCo</p>

<p>What is docker-compose?
Let’s come back to docker-compose.</p>

<p>Docker Compose is a tool you can use to define and share multi-container applications. This means you can run a project with multiple containers using a single source.</p>

<p>For example, assume you’re building a project with NodeJS and MongoDB together. You can create a single image that starts both containers as a service – you don’t need to start each separately.</p>

<p>Interesting right? And this solves the problem which I called out at the very beginning of this article.</p>

<p>To achieve this we need to define a docker-compose.yml.</p>

</section>
            </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div></div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<!-- introduce js_includes_ex support -->

<script>

    // Libraries to add dynamic tags below using .html files
    
    
    window.sciptsLib = new Map();
    window.cssLib = new Map();
    window.scipts = new Map();
    window.links = new Map();
    var jsIdIdx = 0;
    var cssIdIdx = 0;
    
    window.sciptsLib.set('bootstrap', [
        {uri: '//cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js'},
        {uri: '//cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js'}
    ]);
    window.cssLib.set('bootstrap', {uri: '//cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css'});
    
    window.sciptsLib.set('prism', {uri: '/dev/os/assets/libs/prism/prism.js', defer: false});
    window.cssLib.set('prism', {uri: '/dev/os/assets/libs/prism/prism.css', defer: false});

    //window.sciptsLib.set('xmind', {uri: '/dev/os/assets/xmind/umd/xmind-embed-viewer.js', defer: false});
    
    // animate is included in head.html to support logo animation in navbar
    // window.cssLib.set('animate', {uri: '//cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css'});
    
    // Add the script tags before the following element
    var getbookStyleElement = document.getElementById("gitbook_style")

    // Adding script tags to externally link js
        keyName = `prism_js`

        if (!window.scipts.get(keyName)) {

            // Get the links from sciptsLib
            jsLinks = window.sciptsLib.get( 'prism');

            if (jsLinks instanceof Array) {
            
                let scriptTags = []            
                
                for (i in jsLinks) {
                    scriptTag = document.createElement("script")
                    scriptTag.src = jsLinks[i]['uri'];                    
                    scriptTag.defer = ('defer' in jsLinks[i]) ? jsLinks[i]['defer'] : true;
                    scriptTag.id =  `prism_js_${jsIdIdx++}`;
                    document.head.insertBefore(scriptTag, getbookStyleElement)
                    
                    scriptTags.push(scriptTag);
                    console.log(scriptTag)
                }

                // Add script tags to window.scripts map object
                window.scipts.set(keyName, scriptTags)
            
            } else if (window.sciptsLib.has( 'prism')) {

                scriptTag = document.createElement("script");
                // console.log("sadasd", prism, jsLinks);
                scriptTag.src = jsLinks['uri'];
                scriptTag.defer = ('defer' in jsLinks) ? jsLinks['defer'] : true;
                scriptTag.id =  `prism_js_${jsIdIdx++}`;
                document.head.insertBefore(scriptTag, getbookStyleElement)
                console.log(scriptTag)

                // Add script tag to window.scripts map object
                window.scipts.set(keyName, scriptTag);
            }
        }


        // Adding link tags to externally link css
        keyName = `prism_css`

        if (!window.scipts.get(keyName)) {

            // Get the links from cssLib
            cssLinks = window.cssLib.get( 'prism');            
            
            if (cssLinks instanceof Array) {
            
                let cssLinkTags = []            
                
                for (i in cssLinks) {
                    cssLinkTag = document.createElement("script")
                    cssLinkTag.href = cssLinks[i]['uri'];
                    cssLinkTag.defer = ('defer' in cssLinks[i]) ? cssLinks[i]['defer'] : true;
                    cssLinkTag.id =  `prism_css_${cssIdIdx++}`;
                    cssLinkTag.rel = 'stylesheet';
                    document.head.insertBefore(cssLinkTag, getbookStyleElement)
                    
                    cssLinkTags.push(cssLinkTag);
                    console.log(cssLinkTag)
                }

                // Add script tags to window.scripts map object
                window.scipts.set(keyName, cssLinkTags)
            
            } else if (window.cssLib.has( 'prism')) {

                cssLinkTag = document.createElement("link")
                cssLinkTag.href = cssLinks['uri'];
                cssLinkTag.defer = ('defer' in cssLinks) ? cssLinks['defer'] : true;
                cssLinkTag.id =  `prism_css_${cssIdIdx++}`;
                cssLinkTag.rel = 'stylesheet';
                document.head.insertBefore(cssLinkTag, getbookStyleElement)

                console.log(cssLinkTag)

                // Add script tag to window.scripts map object
                window.scipts.set(keyName, cssLinkTag);
            }
        }    
        
    

</script>







<!-- introduce mathjax support -->
<script>
    function fixes_chrome_anchors() {
        let chrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        if (window.location.hash && chrome) {
            setTimeout(function () {
                var hash = window.location.hash;
                window.location.hash = "";
                window.location.hash = hash;
            }, 300);
        }
    }

    if (document.readyState === "loading") {
        // Loading hasn't finished yet
        document.addEventListener("DOMContentLoaded", fixes_chrome_anchors);
    } else {
        // `DOMContentLoaded` has already fired
        fixes_chrome_anchors();
    }
</script>


                        <a href="/dev/os/docker/3_docker_1_fundamentals/" class="navigation navigation-prev navigation-unique hide_element" aria-label="Previous page: 1. Fundamentals"> <!-- class="hide_element" -->
                            <i class="fa fa-angle-left"></i>
                        </a>
                    

                    
                        <a href="/dev/os/docker/3_docker_3_volume/" class="navigation navigation-next navigation-unique" aria-label="Next page: 3. Volumes"> <!-- class="hide_element" -->
                            <i class="fa fa-angle-right"></i>
                        </a>
                    
                    <div class="copyright"><span>&copy; 2024 Intelligent Mind Labs, Inc. All rights reserved.</span>.</div>
                </div>
            </div>

            <script>
                // div "book" element's content is the only content refreshed when nav link is pressed.
                // This functionality is implemented in "gitbook.js" and "theme.js"
                // head.html and footer.html will not be called again and again when a new nav link is clicked
                // Gitbook js is optimized to dynamically change content inside div "book" element.
                // Due to this: script put in the footer will only be called once,
                // which is the very first time the page is loaded by entering
                // the web address in the address bar in the browser
                // 
                $ = jQuery;
                $(function() {
                    // spinnerHide();
                    // setTimeout(spinnerHide, 200);
           
                    $('.childBtn').on('click', function(event) {
                        event.stopImmediatePropagation(); // To prevent following the link (optional)
                        window.location = $(this).attr('link');
                    });

                    $('.parentBtn').on('click', function(event) {
                        window.location = $(this).attr('link');
                    });
                });
            </script>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({
    "page": {
        "title": "Introduction",
        "level": "1.1",
        "depth": 1,
        
        "next": {
            "title": "3. Volumes",
            "level": "1.2",
            "depth": 1,
            "path": "_4_containerization/3_docker_3_volume.md",
            "ref": "_4_containerization/3_docker_3_volume.md",
            "articles": []
        },
        
        "dir": "ltr"
    },    "config": {
        "plugins": ["fontsettings", "highlight", "livereload", "lunr", "search", "sharing", "theme-default", "livereload"],
        "styles": {
            "ebook": "styles/ebook.css",
            "epub": "styles/epub.css",
            "mobi": "styles/mobi.css",
            "pdf": "styles/pdf.css",
            "print": "styles/print.css",
            "website": "styles/website.css"
        },
        "pluginsConfig": {
            "expandable-chapter-small2": {
                "articlesExpand": true,
            },
            "fontsettings": {
                "family": "sans",
                "size": 2,
                "theme": "white"
            },
            "highlight": {},
            "livereload": {},
            "lunr": {
                "ignoreSpecialCharacters": false,
                "maxIndexSize": 1000000
            },
            "search": {},            "sharing": {
                "facebook": true,

                "google": false,

                "github": true,
              
                "github_link": "https://github.com",
              

                "telegram": false,
                "telegram_link": "https://t.me",

                "instapaper": false,

                "twitter": true,
              

                "vk": false,

                "weibo": false,

                "all": ["facebook", "google", "twitter", "weibo", "instapaper", "github", "telegram"]
            },
"theme-default": {
                "showLevel": false,
                "styles": {
                    "ebook": "styles/ebook.css",
                    "epub": "styles/epub.css",
                    "mobi": "styles/mobi.css",
                    "pdf": "styles/pdf.css",
                    "print": "styles/print.css",
                    "website": "styles/website.css"
                }
            },
        },
        "theme": "default",
        "author": "Intelligent Mind Labs",
        "pdf": {
            "pageNumbers": true,
            "fontSize": 12,
            "fontFamily": "Arial",
            "paperSize": "a4",
            "chapterMark": "pagebreak",
            "pageBreaksBefore": "/",
            "margin": {
                "right": 62,
                "left": 62,
                "top": 56,
                "bottom": 56
            }
        },
        "structure": {
            "langs": "LANGS.md",
            "readme": "README.md",
        },
        "variables": {},
        "title": "Wiki | O/S",
        "language": "en",
        "gitbook": "*"
    },
    "file": {
        "path": "_4_containerization/3_docker_2_workflow.md",
        "mtime": "2019-04-27 00:00:00 +0800",
        "type": "markdown"
    },
    "gitbook": {
        "version": "3.2.3",
        "time": "2024-08-26 10:32:47 +0800"
    },
    "basePath": "/dev/os",
    "book": {
        "language": ""
    }
});
            });

            </script>
        </div><script src="/dev/os/assets/gitbook/gitbook.js"></script>
<script src="/dev/os/assets/gitbook/theme.js"></script>

<script src="/dev/os/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.js" async=""></script>
<!-- <script src="/dev/os/assets/gitbook/gitbook-plugin-copy-code-button/toggle.js"></script> -->
<script src="/dev/os/assets/gitbook/gitbook-plugin-expandable-chapters-small2/expandable-chapters-small.js"></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-search-pro/jquery.mark.min.js" defer=""></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-search-pro/search.js" defer=""></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-sharing/buttons.js" defer=""></script>
<script src="/dev/os/assets/gitbook/gitbook-plugin-splitter/splitter.js" defer=""></script>




<!--
<script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script>
-->



<script>
function spinnerHide() {
    $(".spinner-container").removeClass("show_element");
    $(".spinner-container").addClass("hide_element");
    $(".spinner-container").addClass("display_none");
    

    $("#book-search-results").removeClass("hide_element");
    $("#book-search-results").addClass("show_element");

    $(".navigation.navigation-next").removeClass("hide_element");
    $(".navigation.navigation-next").addClass("show_element");

    $(".navigation.navigation-prev").removeClass("hide_element");
    $(".navigation.navigation-prev").addClass("show_element");
}        
</script><!-- trackers --><!-- google analytics --><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V3WBTFTQWG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-V3WBTFTQWG');
</script>
</body>
</html>